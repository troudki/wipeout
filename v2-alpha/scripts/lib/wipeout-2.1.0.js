// wipeout v2.1.0
// (c) Shane Connon 2015
// http://www.opensource.org/licenses/mit-license.php
(function () {

// busybody v0.2.1
// (c) Shane Connon 2015
// http://www.opensource.org/licenses/mit-license.php
(function () {

// orienteer v0.1.0
// (c) Shane Connon 2015
// http://www.opensource.org/licenses/mit-license.php
!function(){function orienteer(){}var a={parents:[],children:[]};orienteer.clearVirtualCache=function(b){if(!b)return a.parents.length=0,void(a.children.length=0);for(var c=0,d=a.children.length;d>c;c++)(a.children[c]===b||a.parents[c]===b)&&(a.children.splice(c,1),a.parents.splice(c,1))},orienteer.useVirtualCache=!0,orienteer.prototype._super=function(){var b=arguments.callee.caller,c=null;if(orienteer.useVirtualCache){var d=a.children.indexOf(b);-1!==d&&(c=a.parents[d])}if(!c){for(var e=[],f=this.constructor.prototype;f;)e.push(f),f=Object.getPrototypeOf(f);e.reverse();for(var g=0,h=e.length;h>g;g++){if(e[g]===b.prototype)c=e[g-1].constructor;else for(var i in e[g]){if(e[g][i]===b)for(var j=g-1;j>=0;j--)if(e[j][i]!==b){c=e[j][i];break}if(c)break}if(c){orienteer.useVirtualCache&&(a.children.push(b),a.parents.push(c));break}}if(!c)throw"Could not find method in parent class"}return c.apply(this,arguments)};orienteer.extend=function(a){if(a.constructor===Function){var b=a;a={constructor:b,statics:{}};for(var c in a.constructor)a.statics[f]=a.constructor[f];for(var c in a.constructor.prototype)a[f]=a.constructor.prototype[f]}else if(a.constructor===Object)a.constructor=function(){this._super.apply(this,arguments)};else if(!a.constructor||a.constructor.constructor!==Function)throw'the property "constructor" must be a function';for(var d in this)this.hasOwnProperty(d)&&this[d]&&this[d].constructor===Function&&this[d]!==orienteer.clearVirtualCache&&this[d]!==orienteer.getInheritanceChain&&void 0===a.constructor[d]&&(a.constructor[d]=this[d]);var e=function(){this.constructor=a.constructor};e.prototype=this.prototype,a.constructor.prototype=new e;for(var f in a)if("constructor"!==f)if("statics"!==f)a.constructor.prototype[f]=a[f];else for(var g in a[f])a.constructor[g]=a[f][g];return a.constructor},orienteer.getInheritanceChain=function(a){for(var b=[];a;)b.push(a),a=Object.getPrototypeOf(a.prototype),a&&(a=a.constructor);return b},window.orienteer=orienteer}();

!function(a){function b(a,b,d,f){return function(g){var h=c.getObserver(a);if(g&&h.$bindingChanges)for(var i in h.$bindingChanges)if(d===h.$bindingChanges[i].fromObject&&g[g.length-1]===h.$bindingChanges[i].change)return;c.captureChanges(d,function(){c.utils.obj.setObject(f,d,c.utils.obj.getObject(b,a))},function(b){c.makeObservable(d);e(b,function(b){var e=c.getObserver(d);if(e){e.$bindingChanges||(e.$bindingChanges={});var f=k();e.$bindingChanges[f]={change:b,fromObject:a},setTimeout(function(){delete e.$bindingChanges[f];for(var a in e.$bindingChanges)return;delete e.$bindingChanges},100)}})})}}var c={},d=c.useObjectObserve=Object.observe&&(!window.hasOwnProperty("useObjectObserve")||window.useObjectObserve),e=function(a,b,c){if(a){c=c||window;for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d)}},f=function(a,b,c){if(a&&(c=c||window,null!=a))for(var d in a)b.call(c,a[d],d)},g=function(a,b){a=a.split(".");var c=a.splice(0,a.length-1),d={};return d[a[a.length-1]]=b(),h(c.join("."),d),d[a[a.length-1]]},h=function(a,b){if(a=a.split("."),"busybody"!==a[0])throw'Root must be "busybody".';a.splice(0,1);var d=c;e(a,function(a){d=d[a]||(d[a]={})}),b&&b instanceof Function&&(b=b()),f(b,function(a,b){d[b]=a})},i=/^\s+|\s+$/g,j=function(a){return a?a.replace(i,""):a};g("busybody.utils.obj",function(){function a(a,b){b||(b=window);for(var c=0,d=a.length;d>c;c++)if(b=b[a[c]],null==b)return c===d-1?b:null;return b}function b(a,b){a.push(b);var d=new c.disposable(function(){d&&(d=null,b=a.indexOf(b),-1!==b&&a.splice(b,1))});return d}var d=/\[\s*\d\s*\]$/g,g=function(a){a=a.split(".");for(var b,e=0;e<a.length;e++){a[e]=c.utils.obj.trim(a[e]);var f=a[e].match(d);if(f&&f.length){(b=c.utils.obj.trim(a[e].replace(d,"")))?a[e]=c.utils.obj.trim(a[e].replace(d,"")):(a.splice(e,1),e--);for(var g=0,h=f.length;h>g;g++)a.splice(++e,0,parseInt(f[g].match(/\d/)[0]))}}return a},h=function(a){var b=[];return e(a,function(a){b.push(isNaN(a)?0===b.length?a:"."+a:"["+a+"]")}),b.join("")},i=function(b,c){return a(g(b),c)},k=function(b,c,d){var e={};return b=g(b),e.remainder=0>=d?b.splice(b.length+d,-1*d):b.splice(d,b.length-d),e.object=a(b,c,d),e},l=function(b,c,d){b=g(b),b.length>1&&(c=a(b.splice(0,b.length-1),c)),c&&(c[b[0]]=d)},m=function(){};return m.trim=j,m.addWithDispose=b,m.enumerateArr=e,m.enumerateObj=f,m.getObject=i,m.getPartialObject=k,m.setObject=l,m.splitPropertyName=g,m.joinPropertyName=h,m}),g("busybody.disposable",function(){function b(a){a.$disposables||(a.$disposables={})}var c=a.extend(function(a){this._super(),this.$disposables=void 0,a&&(a instanceof Function?this.registerDisposeCallback(a):this.registerDisposable(a))});return c.prototype.disposeOf=function(a){if(a instanceof Array){var b=!1;return e(a,function(a){b|=this.disposeOf(a)},this),b}return this.$disposables&&this.$disposables[a]?(this.$disposables[a](),delete this.$disposables[a]):!1},c.prototype.disposeOfAll=function(){if(this.$disposables)for(var a in this.$disposables)this.disposeOf(a)},c.prototype.registerDisposeCallback=function(){var a=0;return function(c){if(!c||c.constructor!==Function)throw"The dispose function must be a Function";b(this);var d=(++a).toString();return this.$disposables[d]=c,d}}(),c.prototype.registerDisposable=function(a){if(a){if(a.constructor!==Function||a.dispose||(a=a.call(this)),!(a&&a.dispose instanceof Function))throw"The disposable object must have a dispose(...) function";return this.registerDisposeCallback(a.dispose.bind(a))}},c.prototype.dispose=function(){this.disposeOfAll()},c}),g("busybody.utils.executeCallbacks",function(){var a=c.disposable.extend(function b(){if(this.constructor===b)throw"You cannot create an instance of an abstract class";this._super(),this.callbacks=[]});return a.prototype.addCallback=function(a){var b=c.utils.obj.addWithDispose(this.callbacks,a);return this.registerDisposable(b),b},a.prototype._execute=function(){throw"Abstract methods must be implemented"},a.prototype.execute=function(){var a=this._execute();a&&!a.cancel&&e(this.callbacks.slice(),function(b){b.apply(null,a.arguments||[])})},a.prototype.dispose=function(){this._super(),this.callbacks.length=0},a}),g("busybody.observeTypes.observeTypesBase",function(){var a=c.utils.executeCallbacks.extend(function b(){if(this.constructor===b)throw"You cannot create an instance of an abstract class";this._super()});return a.prototype.getValue=function(){throw"Abstract methods must be implemented"},a.prototype._execute=function(){var a=this.val;return this.val=this.getValue(),{cancel:this.val===a,arguments:[a,this.val]}},a}),g("busybody.observableBase",function(){var a=c.disposable.extend(function(a){this._super(),this.$changeBatch=[],this.$forObject=a,this.$callbacks={},this.$observes=0});return a.prototype.registerChangeBatch=function(a){this.$changeBatch.length||setTimeout(this.processChangeBatch.bind(this)),this.$changeBatch.push.apply(this.$changeBatch,a)},a.prototype.processChangeBatch=function(){var b={};e(this.$changeBatch,function(a){b[a.name]||(b[a.name]=[]),b[a.name].push(a)}),this.$changeBatch.length=0,c.utils.observeCycleHandler.instance.execute(this.$forObject||this,function(){var c=[];f(b,function(b,d){this.$callbacks[d]&&c.push.apply(c,a.processChanges(this.$callbacks[d],b))},this),e(c,function(a){a()})}.bind(this))},a.processChanges=function(a,b){var c=[],d=[];e(a,function(a,e){if(a.evaluateOnEachChange)for(var e=0,f=b.length;f>e;e++)a.evaluateSingle(b,e)&&c.push(e);else d.push(function(){a.evaluateMultiple(b)&&c.push(e)})}),c.sort(function(a,b){return b>a});for(var f=0,g=c.length;g>f;f++)a.splice(c[f],1);return d},a.prototype.onNextPropertyChange=function(){throw"Abstract methods must be overridden"},a.prototype.captureChanges=function(a,b,d){if(d&&(d=c.utils.obj.splitPropertyName(d)).length>1)return c.captureChanges(c.utils.obj.getObject(d.slice(0,d.length-1).join("."),this.$forObject||this),a,b,d[d.length-1]);d=d&&d.length?d[0]:void 0;var f=d?function(a){var c=[];e(a,function(a){a.name==d&&c.push(a)}),b(c)}:b.bind(this);return d&&this._init(d),this._captureChanges(a,f)},a.prototype._captureChanges=function(){throw"Abstract methods must be overridden"},a.prototype.bind=function(a,b,d){return c.bind(this,a,b,d)},a.prototype.observeArray=function(a,b,d){var e,f,g=this.observe(a,function(a,f){e&&(this.disposeOf(e),e=null);var g={object:f||[],index:0,addedCount:f instanceof Array?f.length:0,removed:a instanceof Array?a:[],type:"splice"};if(d&&d.evaluateOnEachChange)b.call(d.context,g);else{var h=new c.utils.compiledArrayChange([g],0,1);b.call(d?d.context:null,h.getRemoved(),h.getAdded(),h.getIndexes())}f instanceof c.array&&(e=this.registerDisposable(f.observe(b,d)))},{context:this});return(f=c.utils.obj.getObject(a,this.$forObject||this))instanceof c.array&&(e=this.registerDisposable(f.observe(b,d))),new c.disposable(function(){e&&(this.disposeOf(e),e=null),g&&(g.dispose(),g=null)})},a.prototype.isObserved=function(){return!!this.$observes},a.prototype.observe=function(a,b,d){if(this.$observes++,/[\.\[]/.test(a)){d&&(d={context:d.context,trackPartialObservable:d.trackPartialObservable,forceObserve:d.forceObserve});var e=new c.observeTypes.pathObserver(this.$forObject||this,a,d);return e.registerDisposeCallback(function(){this.$observes--}.bind(this)),e.onValueChanged(b.bind((d?d.context:!1)||e.forObject),!1),this.registerDisposable(e),e}this._init(a);var f=new c.callbacks.propertyCallback(b,d);this.$callbacks[a]||(this.$callbacks[a]=[]),this.$callbacks[a].push(f),d&&d.activateImmediately?f.activate():this.onNextPropertyChange(a,function(a){f.activate(a)});var g={dispose:function(b){g&&(g=null,this.$observes--,b?this.onNextPropertyChange(a,function(a){f.deactivate(a)}):f.deactivate())}.bind(this)};return this.registerDisposable(g),g},a.prototype._init=function(){throw"Abstract methods must be implemented"},a.prototype.dispose=function(){this._super(),delete this.$forObject;for(var a in this.$callbacks)delete this.$callbacks[a]},a.prototype.computed=function(a,b,d){d?d.hasOwnProperty("context")||(d.context=this.$forObject||this):d={context:this.$forObject||this};var e=new c.observeTypes.computed(b,d);return e.bind(this.$forObject||this,a),this.registerDisposable(e),e},a.prototype.del=function(a){delete(this.$forObject||this)[a]},a.afterObserveCycle=function(a){return c.utils.observeCycleHandler.instance.afterObserveCycle(a)},a.beforeObserveCycle=function(a){return c.utils.observeCycleHandler.instance.beforeObserveCycle(a)},a.afterNextObserveCycle=function(a,b){if(!b&&0===c.utils.observeCycleHandler.instance.length)return void a();var d=c.utils.observeCycleHandler.instance.afterObserveCycle(function(){d.dispose(),a()});return d},a.beforeNextObserveCycle=function(a){var b=c.utils.observeCycleHandler.instance.beforeObserveCycle(function(){b.dispose(),a()});return b},a}),g("busybody.callbacks.changeCallback",function(){var b=a.extend(function(a){this._super(),this.evaluateOnEachChange=a});return b.dispose={},b.prototype.activate=function(a){if(this._activated||this._activatingChange)throw"This callback has been activated";if(arguments.length){if(null==a)throw"Invalid change";this._activatingChange=a}else this._activated=!0},b.prototype.deactivate=function(a){if(this._deactivatingChange)throw"This callback has a deactivate pending";if(arguments.length){if(null==a)throw"Invalid change";this._deactivatingChange=a}else this._activated=!1},b.prototype.evaluateSingle=function(a,c){if(this.evaluateOnEachChange){if(this._activated===!1||this.hasOwnProperty("_deactivatingChange")&&this._deactivatingChange===a[c])return this._activated=!1,b.dispose;if(!this.hasOwnProperty("_activated")){if(!this.hasOwnProperty("_activatingChange")||this._activatingChange!==a[c])return;this._activated=!0,delete this._activatingChange}this._evaluateSingle(a,c)}},b.prototype._evaluateSingle=function(){throw"Abstract methods must be implemented"},b.prototype.evaluateMultiple=function(a){if(!this.evaluateOnEachChange&&a.length){if(this._activated===!1)return b.dispose;var c=0,d=a.length,e=void 0;return this.hasOwnProperty("_activated")||(c=a.indexOf(this._activatingChange),-1!==c&&(this._activated=!0,delete this._activatingChange)),this._deactivatingChange&&(d=a.indexOf(this._deactivatingChange),-1===d?d=a.length:(e=b.dispose,this._activated=!1,delete this._deactivatingChange)),-1!==c&&d>c&&this._evaluateMultiple(a,c,d),e}},b.prototype._evaluateMultiple=function(){throw"Abstract methods must be implemented"},b}),g("busybody.arrayBase",function(){function b(a){return"number"==typeof a&&a%1===0?a:null===a?0:"boolean"==typeof a?a?1:0:"string"!=typeof a||isNaN(a=parseFloat(a))||a%1!==0?void 0:a}var d=a.extend.call(Array,function(a){if(Array.call(this),arguments.length&&!(arguments[0]instanceof Array))throw"The initial values must be an array";if(this.$disposables=[],this.$boundArrays=[],this.$callbacks=[],this.$changeBatch=[],this.$length=a?a.length:0,a)for(var b=0,c=a.length;c>b;b++)this[b]=a[b]});d.prototype._super=a.prototype._super,d.extend=a.extend,d.isValidArrayChange=function(a){return"splice"===a.type||!isNaN(parseInt(a.name))},d.prototype.onNextArrayChange=function(){throw"Abstract methods must be implemented"},d.prototype.processChangeBatch=function(){var a=this.$changeBatch.slice();this.$changeBatch.length=0,c.utils.observeCycleHandler.instance.execute(this,function(){e(c.observableBase.processChanges(this.$callbacks,a),function(a){a()})}.bind(this))},d.prototype.registerChangeBatch=function(a){for(var b=a.length-1;b>=0;b--)d.isValidArrayChange(a[b])||a.splice(b,1);return c.observableBase.prototype.registerChangeBatch.call(this,a)},Object.defineProperty(d.prototype,"length",{set:function(a){if(void 0===(a=b(a)))throw RangeError("Invalid array length");if(a!==this.$length){if(!this.__alteringArray)if(a>this.$length){var c=new Array(a-this.length+2);c[0]=this.length,c[1]=0,this.splice.apply(this,c)}else a<this.$length&&this.splice(a,this.length-a);this.$length=a}},get:function(){return this.$length}}),d.prototype._init=function(){throw"Abstract methods must be implemented"},d.prototype.observe=function(a,b){if("string"==typeof arguments[0]){var d=Array.prototype.slice.call(arguments);return d.splice(0,0,this),c.observe.apply(null,d)}return this.addCallback(new c.callbacks.arrayCallback(a,b))},d.prototype.disposableFor=function(a){var b={dispose:function(c){b&&(b=null,c?this.onNextArrayChange(function(b){a.deactivate(b)}):a.deactivate())}.bind(this)};return b};var f="busybody-do-not-apply-to";return d.prototype.alteringArray=function(a,b){if(this.__alteringArray)throw"Calls to alteringArray must be synchronus and not nested.";try{return this.__alteringArray=!0,e(this.$boundArrays,function(c){if(c[f])throw"Circular reference in array bindings found";this[f]!==c&&(c[f]=this,c[a].apply(c,b))},this),Array.prototype[a].apply(this,b)}finally{this.__alteringArray=!1,e(this.$boundArrays,function(a){delete a[f]})}},d.copyAll=function(a,b,c){var d;c?(d=[],e(a,function(a){d.push(c(a))})):d=a.slice(),d.splice(0,0,0,b.length),b.splice.apply(b,d)},d.prototype.bind=function(a){return a&&-1===this.$boundArrays.indexOf(a)?(this.$boundArrays.push(a),a instanceof c.array&&-1!==a.$boundArrays.indexOf(this)||d.copyAll(this,a),new c.disposable(function(){if(a){var b;-1!==(b=this.$boundArrays.indexOf(a))&&this.$boundArrays.splice(b,1),a=null}}.bind(this))):void 0},d.prototype.addCallback=function(a){this._init(),this.$callbacks.push(a),this.onNextArrayChange(function(b){a.activate(b)});var b=this.disposableFor(a);return this.$disposables.push(b),b},d.prototype.dispose=function(){e(this.$disposables,function(a){a.dispose()}),this.$disposables.length=0,this.$boundArrays.length=0,this.$callbacks.length=0},d}),d?g("busybody.array",function(){var a=c.arrayBase.extend(function b(a){return this instanceof b?void this._super.apply(this,arguments):new b(a)});return a.prototype.onNextArrayChange=function(a){var b=function(d){if(b)for(var e=0,f=d.length;f>e;e++)if(c.arrayBase.isValidArrayChange(d[e]))return Array.unobserve(this,b),b=null,void a(d[e])}.bind(this);Array.observe(this,b)},a.prototype.captureArrayChanges=function(a,b){var d=function(a){a=a.slice();for(var d=a.length-1;d>=0;d--)c.arrayBase.isValidArrayChange(a[d])||a.splice(d,1);b(a)};Array.observe(this,d),a(),Array.unobserve(this,d)},a.prototype._init=function(){this.__subscription||(this.__subscription=this.registerChangeBatch.bind(this),Array.observe(this,this.__subscription))},a.prototype.dispose=function(){this._super(),this.__subscription&&(Array.unobserve(this,this.__subscription),delete this.__subscription)},a}):g("busybody.array",function(){var a=c.arrayBase.extend(function b(a){return this instanceof b?(this._super.apply(this,arguments),this.$onNextArrayChanges=[],void(this.$captureCallbacks=[])):new b(a)});return a.prototype.captureArrayChanges=function(a,b){var d=function(a){a=a.slice();for(var d=a.length-1;d>=0;d--)c.arrayBase.isValidArrayChange(a[d])||a.splice(d,1);b(a)};this.$captureCallbacks.push(d),a(),this.$captureCallbacks.splice(this.$captureCallbacks.indexOf(d),1)},a.prototype.registerChangeBatch=function(a){for(var b=0,d=a.length;d>b;b++)if(c.arrayBase.isValidArrayChange(a[b])){e(this.$onNextArrayChanges.splice(0,this.$onNextArrayChanges.length),function(c){c(a[b])});break}return e(this.$captureCallbacks,function(b){b(a)}),this._super(a)},a.prototype.onNextArrayChange=function(a){this.$onNextArrayChanges.push(a)},a.prototype._init=function(){},a}),function(){var a=c.array;a.prototype.replace=function(a,b){return this.splice(a,a>=this.length?0:1,b),b},a.prototype.pop=function(){return d||this.length&&this.registerChangeBatch([{addedCount:0,index:this.length-1,object:this,removed:[this[this.length-1]],type:"splice"}]),this.alteringArray("pop")},a.prototype.shift=function(){return d||this.length&&this.registerChangeBatch([{addedCount:0,index:0,object:this,removed:[this[0]],type:"splice"}]),this.alteringArray("shift")},a.prototype.remove=function(a){var b;return-1!==(b=this.indexOf(a))?(this.splice(b,1),!0):!1},a.prototype.push=function(){return d||this.registerChangeBatch([{addedCount:arguments.length,index:this.length,object:this,removed:[],type:"splice"}]),this.alteringArray("push",arguments)},a.prototype.reverse=function(){var a=this.length;if(!(2>a)){if(!d){for(var b,c=Math.floor(a/2),e=[],f=0;c>f;f++)e.push({name:f.toString(),object:this,oldValue:this[f],type:"update"}),b=a-f-1,e.push({name:b.toString(),object:this,oldValue:this[b],type:"update"});this.registerChangeBatch(e)}return this.alteringArray("reverse")}},a.prototype.sort=function(){if(!d){for(var a=this.slice(),b=[],c=this.alteringArray("sort",arguments),e=0,f=a.length;f>e;e++)a[e]!==this[e]&&b.push({name:e.toString(),object:this,oldValue:a[e],type:"update"});return this.registerChangeBatch(b),c}return this.alteringArray("sort",arguments)},a.prototype.splice=function(a,b){if(!d){for(var c=[],e=a,f=b+a>this.length?this.length:b+a;f>e;e++)c.push(this[e]);this.registerChangeBatch([{addedCount:arguments.length-2,index:a,object:this,removed:c,type:"splice"}])}return this.alteringArray("splice",arguments)}}(),g("busybody.callbacks.arrayCallback",function(){var a=c.callbacks.changeCallback.extend(function(a,b){this._super(b&&b.evaluateOnEachChange),this.useRawChanges=b&&b.useRawChanges,this.callback=a,this.context=b?b.context:null});return a.prototype._evaluateSingle=function(a,b){this.callback.call(this.context,a[b])},a.prototype._evaluateMultiple=function(a,b,d){if(this.useRawChanges)return void this.callback.call(this.context,a.slice(b,d));a.compiled||(a.compiled=[]);for(var e,f=0,g=a.compiled.length;g>f;f++)if(a.compiled[f].areEqual(b,d)){e=a.compiled[f];break}e||a.compiled.push(e=new c.utils.compiledArrayChange(a,b,d)),this._evaluateArrayMultiple(e)},a.prototype._evaluateArrayMultiple=function(a){this.callback.call(this.context,a.getRemoved(),a.getAdded(),a.getIndexes())},a}),g("busybody.callbacks.propertyCallback",function(){var a=c.callbacks.changeCallback.extend(function(a,b){this._super(b&&b.evaluateOnEachChange),this.callback=a,this.context=b?b.context:null,this.evaluateIfValueHasNotChanged=b&&b.evaluateIfValueHasNotChanged,this.useRawChanges=b&&b.useRawChanges});return a.prototype._evaluateSingle=function(a,b){var c=a[b],d=a[b+1],e=d?d.oldValue:c.object[c.name];this.useRawChanges?this.callback.call(this.context,c):(this.evaluateIfValueHasNotChanged||e!==c.oldValue)&&this.callback.call(this.context,c.oldValue,e)},a.prototype._evaluateMultiple=function(a,b,c){var d=a[c]?a[c].oldValue:a[0].object[a[0].name];this.useRawChanges?this.callback.call(this.context,a.slice(b,c)):(this.evaluateIfValueHasNotChanged||d!==a[b].oldValue)&&this.callback.call(this.context,a[b].oldValue,d)},a});d?g("busybody.observable",function(){var a=c.observableBase.extend(function(a){this._super(a)});return a.prototype.onNextPropertyChange=function(a,b){var c=function(d){if(c)for(var e=0,f=d.length;f>e;e++)if(d[e].name==a){var g=c;return Object.unobserve(this.$forObject||this,g),c=null,void b(d[e])}}.bind(this);Object.observe(this.$forObject||this,c)},a.prototype._captureChanges=function(a,b){Object.observe(this.$forObject||this,b),a(),Object.unobserve(this.$forObject||this,b)},a.prototype._init=function(){this.__subscribeCallback||(this.__subscribeCallback=this.registerChangeBatch.bind(this),Object.observe(this.$forObject||this,this.__subscribeCallback))},a.prototype.dispose=function(){this._super(),this.__subscribeCallback&&(Object.unobserve(this.$forObject||this,this.__subscribeCallback),delete this.__subscribeCallback)},a}):g("busybody.observable",function(){function a(a){return a.$observer||a}var b=c.observableBase.extend(function(a){this._super(a),this.$observed={},this.$onNextPropertyChanges={},this.$captureCallbacks=[]});return b.prototype.onNextPropertyChange=function(a,b){(this.$onNextPropertyChanges[a]||(this.$onNextPropertyChanges[a]=[])).push(b)},b.prototype._captureChanges=function(a,b){this.$captureCallbacks.push(b),a(),this.$captureCallbacks.splice(this.$captureCallbacks.indexOf(b),1)},b.prototype._init=function(b){this.$observed.hasOwnProperty(b)||(this.$observed[b]=(this.$forObject||this)[b],Object.defineProperty(this.$forObject||this,b,{get:function(){return a(this).$observed[b]},set:function(c){var d=a(this),f={type:d.$observed.hasOwnProperty(b)?"update":"add",name:b,object:this,oldValue:d.$observed[b]};if(d.$observed[b]=c,d.$onNextPropertyChanges[b]){var g=d.$onNextPropertyChanges[b];delete d.$onNextPropertyChanges[b],setTimeout(function(){e(g,function(a){a(f)})})}d.addChange(f)},enumerable:!0,configurable:!0}))},b.prototype.addChange=function(a){this.__changeToken||(this.__changeToken=[],setTimeout(function(){var a=this.__changeToken;delete this.__changeToken,this.registerChangeBatch(a)}.bind(this))),this.__changeToken.push(a),e(this.$captureCallbacks,function(b){b([a])})},b.prototype.del=function(a){(this.$forObject||this)[a]=void 0,this._super(a)},b.prototype.dispose=function(){var a=this.$forObject||this;for(var b in this.$observed)delete a[b],a[b]=this.$observed[b],delete this.$observed[b];this._super();for(var b in this.$onNextPropertyChanges)delete this.$onNextPropertyChanges[b]},b});g("busybody.observeTypes.computed",function(){var a=/\s*with\s*\(/g,b=/([^\s,]+)/g,d=/\/\/.*$/gm,f=/\/\*[\s\S]*?\*\//gm,g="((\\s*\\.\\s*([\\w\\$]*))|(\\s*\\[\\s*\\d\\s*\\]))+",h={},i=c.observeTypes.observeTypesBase.extend(function l(a,c){if(this._super(),c=c||{},this.pathObserverOptions={trackPartialObservable:c.trackPartialObservable,forceObserve:c.forceObserve},this.arguments=[],c.observeArrayElements&&(this.possibleArrays=[]),this.callbacks=[],this.callbackString=l.stripFunction(a),this.callbackFunction=a,this.context=c.context,!c.allowWith&&l.testForWith(this.callbackString))throw'You cannot use the "with" keyword in computed functions by default. To allow "with", use the allowWith flag on the options argument of the constructor, however, properties of the variable within the "with" statement cannot be monitored for change.';var d=this.callbackString.slice(this.callbackString.indexOf("(")+1,this.callbackString.indexOf(")")).match(b)||[];if(c.watchVariables&&d.length){var f;for(var g in c.watchVariables)-1!==(f=d.indexOf(g))&&(this.arguments[f]=c.watchVariables[g],d[f]=h)}if(e(d,function(a){if(a!==h)throw'Argument "'+a+'" must be added as a watch variable.'}),this.context&&this.watchVariable("this",this.context,c.observeArrayElements),c.watchVariables)for(var g in c.watchVariables)this.watchVariable(g,c.watchVariables[g],c.observeArrayElements);c.delayExecution||this.execute()});i.testForWith=function(b){for(a.lastIndex=0;a.exec(b);)if(!/[\.\w\$]/.test(b[a.lastIndex-1]))return!0;return!1},i.prototype.rebuildArrays=function(){e(this.possibleArrays,function(a){a.disposeKeys&&a.disposeKeys.length&&(this.disposeOf(a.disposeKeys),a.disposeKeys.length=0);var b=a.path.length?c.utils.obj.getObject(a.path,a.root):a.root;b instanceof Array&&(a.disposeKeys=a.disposeKeys||[],e(b,function(b){e(a.subPaths,function(c){a.disposeKeys.push(this.addPathWatchFor(b,c))},this)},this))},this)},i.prototype.getValue=function(){return this.possibleArrays&&this.rebuildArrays(),this.callbackFunction.apply(this.context,this.arguments)},i.prototype.bind=function(a,b){var c=i.createBindFunction(a,b),d=this.onValueChanged(c,!0);return d.registerDisposable(c),d},i.prototype.onValueChanged=function(a,b){var c=this.addCallback(a);return b&&a(void 0,this.val),c},i.stripFunction=function(a){a=a.toString().replace(d,"").replace(f,"");for(var b=/["']/g;b.exec(a);){var c="'"===a[b.lastIndex-1]?/'/g:/"/g;for(c.lastIndex=b.lastIndex;c.exec(a);){for(var e=0,g=c.lastIndex-2;"\\"===a[g];g--)e++;if(e%2===0){a=a.substr(0,b.lastIndex-1)+"#"+a.substr(c.lastIndex);break}}}return a},i.prototype.examineVariable=function(a,b){if(a=j(a),!/^[\$\w]+$/.test(a))throw"Invalid variable name. Variable names can only contain 0-9, a-z, A-Z, _ and $";for(var c,d,e,f,h=[],i=a.replace("$","\\$"),k=new RegExp((b?"(":"")+i+g+(b?")|"+i:""),"g"),l=[];null!==(c=k.exec(this.callbackString));)if(e=k.lastIndex-c[0].length,-1===(f=l.indexOf(d=c[0].replace(/\s/g,"")))||b){if(e>0){if(-1!==this.callbackString[e-1].search(/[\w\$]/))continue;for(var m=e-1;m>=0;m--){if("."===this.callbackString[m]){d=null;break}if(0!==this.callbackString[m].search(/\s/))break}}null!==d&&(-1===f&&(l.push(d),f=h.length,h.push({variableName:d,complexResults:[]})),b&&h[f].complexResults.push({name:c[0],index:e}))}return h},i.prototype.watchVariable=function(a,b,d){var f,g,h=this.examineVariable(a,d);e(h,function(a){if(f=c.utils.obj.splitPropertyName(a.variableName),f.length>1&&this.addPathWatchFor(b,c.utils.obj.joinPropertyName(f.slice(1))),d){var h;e(a.complexResults,function(a){(g=this.examineArrayProperties(a.name,a.index))&&(h?h.subPaths.push(g):this.possibleArrays.push(h={root:b,path:c.utils.obj.joinPropertyName(f.slice(1)),subPaths:[g]}))},this)}},this)};var k=new RegExp("^\\s*\\[\\s*[\\w\\$]+\\s*\\]\\s*"+g);return i.prototype.examineArrayProperties=function(a,b){var c;return(c=k.exec(this.callbackString.substr(b+a.length)))?(c=c[0].substr(c[0].indexOf("]")+1).replace(/\s/g,""),"."===c[0]?c.substring(1):c):void 0},i.prototype.addPathWatchFor=function(a,b){var b=new c.observeTypes.pathObserver(a,b,this.pathObserverOptions);b.onValueChanged(this.execute.bind(this),!1);var d,e=this.execute.bind(this);return b.onValueChanged(function(a,b){d&&(d.dispose(),d=null),b instanceof c.array&&(d=b.observe(e))},!0),this.registerDisposable(b)},i.createBindFunction=function(a,b){var d,e=function(f,g){var h=c.utils.obj.getObject(b,a);g!==h&&(e.dispose(),g instanceof Array||h instanceof Array?d=c.tryBindArrays(g,h):c.utils.obj.setObject(b,a,g))};return e.dispose=function(){d&&(d.dispose(),d=null)},e},i}),g("busybody.observeTypes.pathObserver",function(){var a=c.observeTypes.observeTypesBase.extend(function(a,b,d){this._super(),this.trackPartialObservable=d&&d.trackPartialObservable,this.forObject=a,this.property=b,this.path=c.utils.obj.splitPropertyName(b),this.forceObserve=d&&d.forceObserve,this.__pathDisposables=new Array(this.path.length),this.execute(),this.buildObservableChain()});return a.prototype.onValueChanged=function(a,b){var c=this.addCallback(a);return b&&a(void 0,this.val),c},a.prototype.buildObservableChain=function(a){a=a||0;for(var b=a;b<this.path.length;b++)this.__pathDisposables[b]&&(this.__pathDisposables[b].dispose(),this.__pathDisposables[b].unmakeObservable&&this.__pathDisposables[b].unmakeObservable(),this.__pathDisposables[b]=null);var d=this.forObject,e=this;for(b=0;d&&a>b;b++)d=d[this.path[b]];for(;d&&b<this.path.length;b++){if(this.forceObserve&&!c.canObserve(d)&&(c.makeObservable(d),c.canObserve(d)))var f=function(a){return function(){c.isObserved(a)||c.tryRemoveObserver(a)}}(d);if(c.canObserve(d)||d instanceof c.array){var g=[d,function(a){return function(){a<e.path.length-1&&e.buildObservableChain(a),e.execute()}}(b)];isNaN(this.path[b])&&g.splice(1,0,this.path[b]),this.__pathDisposables[b]=c.tryObserve.apply(null,g),this.__pathDisposables[b].unmakeObservable=f}else if(!this.trackPartialObservable)return;d=d[this.path[b]]}},a.prototype.getValue=function(){for(var a=this.forObject,b=0,c=this.path.length;null!=a&&c>b;b++)a=a[this.path[b]];return b===c?a:null},a.prototype.dispose=function(){this._super();for(var a=0,b=this.__pathDisposables.length;b>a&&this.__pathDisposables[a];a++)this.__pathDisposables[a]&&(this.__pathDisposables[a].dispose(),this.__pathDisposables[a].unmakeObservable&&this.__pathDisposables[a].unmakeObservable());this.__pathDisposables.length=0},a}),g("busybody.utils.compiledArrayChange",function(){function a(a,b,c){this.beginAt=b,this.endAt=c,this.changes=[],this.build(a)}return a.prototype.buildIndexes=function(){if(!this.indexes){var a,b,c=[],d=[],f=[],g=[],h=[],i=[],j=this.added.slice();e(this.finalArray,function(b,c){(c>=this.beginArray.length||b!==this.beginArray[c])&&(-1!==(a=j.indexOf(b))?(g.push({value:b,index:c}),j.splice(a,1)):f[c]=b)},this);var k=this.removed.slice();e(this.beginArray,function(b,e){(e>=this.finalArray.length||b!==this.finalArray[e])&&(-1!==(a=k.indexOf(b))?(h.push({value:b,index:e}),k.splice(a,1)):(c.push(b),d.push(e)))},this);for(var l={};c.length;)a=c.shift(),b=f.indexOf(a),f[b]=l,i.push({value:a,from:d.shift(),to:b});this.indexes={moved:i,added:g,removed:h}}},a.prototype.build=function(a){if(this.removed=[],this.added=[],!a.length||this.beginAt>=this.endAt)return void(this.indexes={added:[],removed:[],moved:[]});for(var b,c,d,f,g=a[0].object.slice(),h=a.length-1;h>=this.beginAt;h--)b="splice"===a[h].type?a[h]:{addedCount:1,index:parseInt(a[h].name),removed:[a[h].oldValue]},h<this.endAt&&(this.finalArray||(this.finalArray=g.slice()),f=0,e(b.removed,function(a){-1===(d=this.added.indexOf(a))?(this.removed.splice(f,0,a),f++):this.added.splice(d,1)},this),f=0,e(g.slice(b.index,b.index+b.addedCount),function(a){-1===(d=this.removed.indexOf(a))?(this.added.splice(f,0,a),f++):this.removed.splice(d,1)},this),this.changes.splice(0,0,{index:b.index,added:g.slice(b.index,b.index+b.addedCount),removed:b.removed,change:a[h]})),c=b.removed.slice(),c.splice(0,0,b.index,b.addedCount),g.splice.apply(g,c);this.beginArray=g.slice()},a.prototype.areEqual=function(a,b){return this.beginAt===a&&this.endAt===b},a.prototype.getRemoved=function(){return this.removed.slice()},a.prototype.getAdded=function(){return this.added.slice()},a.prototype.getIndexes=function(){return this.indexes||this.buildIndexes(),{added:this.indexes.added.slice(),removed:this.indexes.removed.slice(),moved:this.indexes.moved.slice()}},a}),g("busybody.utils.observeCycleHandler",function(){function a(a){a()}var b=c.observable.extend(function(){this._super(),this.$afterObserveCycles=[],this.$beforeObserveCycles=[],this.length=0,this.observe("length",function(b,c){0===c&&e(this.$afterObserveCycles.slice(),a)},{context:this,evaluateOnEachChange:!1,evaluateIfValueHasNotChanged:!0})});return b.prototype.execute=function(a,b){try{this.before(a),b()}finally{this.after(a)}},b.prototype.before=function(b){b!==this&&(0===this.length&&e(this.$beforeObserveCycles.slice(),a),this.length++)},b.prototype.clear=function(){this.length>0&&(this.length=0)},b.prototype.after=function(a){a===this||this.length<=0||this.length--},b.prototype.afterObserveCycle=function(a){return c.utils.obj.addWithDispose(this.$afterObserveCycles,a)},b.prototype.beforeObserveCycle=function(a){return c.utils.obj.addWithDispose(this.$beforeObserveCycles,a)},b.prototype.dispose=function(){this._super(),this.$afterObserveCycles.length=0,this.$beforeObserveCycles.length=0},b.instance=new b,b}),c.getObserver=function(a){return null==a||a instanceof c.observableBase?a:a.$observer instanceof c.observableBase?a.$observer:null},c.tryRemoveObserver=function(a){return a&&!(a instanceof c.observableBase)&&a.$observer instanceof c.observableBase&&(a.$observer.dispose(),delete a.$observer)},c.captureArrayChanges=function(a,b,d){if(!(a instanceof c.array))throw"Only busybody.array objects can have changes captured";return a.captureArrayChanges(b,d)},c.captureChanges=function(a,b,d,e){return(a=c.getObserver(a))?a.captureChanges(b,d,e):void b()},c.makeObservable=function(a){if(arguments.length){if(!a)return a}else a={};if(a instanceof c.array){if(c.getObserver(a))return a}else if(c.canObserve(a))return a;if(a.$observer)throw"The $observer property is reserved";return Object.defineProperty(a,"$observer",{enumerable:!1,configurable:!0,value:new c.observable(a),writable:!1}),a},c.observe=function(a,b,d,e){return e?e.forceObserve=!0:e={forceObserve:!0},c.tryObserve(a,b,d,e)},c.tryObserve=function(a,b,d,e){if(!a)return!1;if(a instanceof c.array){if(b instanceof Function)return a.observe(arguments[1],arguments[2],arguments[3]);"length"===b&&(b="$length"),c.makeObservable(a)}else if(a instanceof Array&&"length"===b)return!1;var f;return(f=c.getObserver(a))||e&&e.forceObserve&&(f=c.getObserver(c.makeObservable(a)))?f.observe(b,d,e):!1},c.computed=function(a,b,d,e){return c.getObserver(c.makeObservable(a)).computed(b,d,e)
},c.observeArray=function(a,b,d,e){return c.makeObservable(a),c.tryObserveArray(a,b,d,e)},c.tryObserveArray=function(a,b,d,e){var f=c.getObserver(a);return f?f.observeArray(b,d,e):!1},c.tryBindArrays=function(a,b,d){if(!(a instanceof Array)&&null!=a||!(b instanceof Array)&&null!=b)throw"You cannot bind a value to an array. Arrays can only be bound to other arrays.";if(null!=a||null!=b){var e;if(null==a?b.length=0:null!=b&&(a instanceof c.array?e=a.bind(b):c.array.copyAll(a,b)),d){var f=c.tryBindArrays(b,a);f&&(e?e.registerDisposable(f):e=f)}return e}};var k=function(){var a=0;return function(){return"ch-"+ ++a}}();c.tryBind=function(a,d,e,f,g,h){function i(){j&&(l.disposseOf(j),disp=null);var g=c.utils.obj.getObject(d,a),i=c.utils.obj.getObject(f,e);g instanceof Array||i instanceof Array?j=l.registerDisposable(c.tryBindArrays(g,i)):h?h=void 0:(k||(k=b(a,d,e,f))).apply(this,arguments)}var j,k,l=new c.disposable;return l.registerDisposable(c.tryObserve(a,d,i,{useRawChanges:!0})),i(),g&&l.registerDisposable(c.tryBind(e,f,a,d,!1,!0)),l},c.bind=function(a,b,d,e,f){return c.makeObservable(a),c.makeObservable(d),c.tryBind(a,b,d,e,f)},c.isObserved=function(a){var b;return!(!(b=c.getObserver(a))||!b.isObserved())},c.canObserve=function(a){return a instanceof c.array||!!c.getObserver(a)},c.del=function(a,b){var d=c.getObserver(a);return d?d.del(b):void delete d[b]},c.dispose=function(a){!c.tryRemoveObserver(a)&&a instanceof c.disposable&&a.dispose()},window.busybody=c}(window.orienteer);

}());

!function(a,b){function c(a,b){wipeout.settings.displayWarnings&&(a+='\n\nTo disable warnings globally you can set "wipeout.settings.displayWarnings" to false.',console.warn(b?{message:a,data:b}:a))}function d(a,b){return k("wipeout.template.rendering.htmlAttributes.wo-"+a,b),b=function(){return wipeout.template.rendering.htmlAttributes["wo-"+a]},wipeout.template.rendering.htmlAttributes["wo-"+a].test instanceof Function&&k("wipeout.template.rendering.dynamicHtmlAttributes.wo-"+a,b),k("wipeout.template.rendering.htmlAttributes.data-wo-"+a,b)}function e(a,b){return d(a,function(){return b})}function f(d,e,f){function g(){var a=[];return-1!==l&&(a[l]=m instanceof Function?m.apply(this,arguments):void 0!==m?m:arguments[0]),-1!==n&&(a[n]=o instanceof Function?o.apply(this,arguments):void 0!==o?o:arguments[1]),a}function h(){if(i)throw'You cannot add any more functionality using this DSL as this view model has already been built. You can still add methods to the view model by adding them directly to the build output, e.g.\nvar myClass = wo.viewModel("myClass").build();\nmyClass.doSomething = function () { ... };'}setTimeout(function(){i||c('The view model "'+d+'" was not built. You must call ".build()" to actually create the view model class. To supress this warning use the "doNotWarn" argument of the wo.viewModel method.')},1e3),e=e||wipeout.viewModels.view;var i,j,l,m,n,o,p,q=-1!==a.getInheritanceChain(e).indexOf(wo.view),r=-1!==a.getInheritanceChain(e).indexOf(b.disposable),s={},t={},u=(j=e.toString().replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//gm,"")).slice(j.indexOf("(")+1,j.indexOf(")")).match(/([^\s,]+)/g)||[],v={statics:!0},w={},x={},y={},z={build:function(){if(i)return i.prototype;if(wipeout.utils.obj.getObject(d))throw d+" already exists.";l=u.indexOf("templateId"),-1!==l&&(m=t.templateId,delete t[l]),n=u.indexOf("model"),-1!==l&&(o=t.model,delete t[n]);var b=d.split(".");i=new Function("extend","getParentConstructorArgs","values","viewModelLifecycle","return function "+b[b.length-1]+" (templateId, model) {\n	extend.apply(this, getParentConstructorArgs.apply(this, arguments));\n\n	for (var i in values)\n		this[i] = values[i] instanceof Function ?\n			values[i].apply(this, arguments) :\n			values[i];\n\n	if (viewModelLifecycle.onInitialized)\n		(this.$onInitialized || (this.$onInitialized = [])).push(viewModelLifecycle.onInitialized);\n	if (viewModelLifecycle.onRendered)\n		(this.$onRendered || (this.$onRendered = [])).push(viewModelLifecycle.onRendered);\n	if (viewModelLifecycle.onUnrendered)\n		(this.$onUnrendered || (this.$onUnrendered = [])).push(viewModelLifecycle.onUnrendered);\n	if (viewModelLifecycle.onApplicationInitialized)\n		(this.$onApplicationInitialized || (this.$onApplicationInitialized = [])).push(viewModelLifecycle.onApplicationInitialized);\n}")(e,g,t,s),k(d,function(){return a.extend.call(e,i)}),v.statics=i;for(var c in v)i.prototype[c]=v[c];for(var c in w)i[c]=w[c];for(var c in y)i.addGlobalParser(c,y[c]);for(var c in x)i.addGlobalBindingType(c,x[c]);return v=void 0,w=void 0,x=void 0,p=void 0,z.build()},addFunction:function(a,b){if(h(),!(b instanceof Function))return z.value(a,b);if(v[a])throw"You have already added a function: "+a;return v[a]=b,z},value:function(a,b){if(h(),"constructor"===a)return z.constructor(b);if(b instanceof Function)return z.addFunction(a,b);if(t[a])throw"You have already added a value: "+a;return t[a]=b,z},dynamicValue:function(a,b){if(h(),"constructor"===a)return z.constructor(b);if(!(b instanceof Function))throw"A dynamic value must be a function which returns the value.";if(t[a])throw"You have already added a value: "+a;return t[a]=b,z},staticFunction:function(a,b){return z.staticValue(a,b)},staticValue:function(a,b){if(h(),w[a])throw"You have already added a static value: "+a;return w[a]=b,z},parser:function(b,c){if(h(),y[b])throw"A parser has already been set for this object";if(p=p||a.getInheritanceChain.apply(e),-1===p.indexOf(wipeout.base.bindable))throw"You must inherit from wipeout.base.bindable to use global parsers. Alternatively you can inherit from any view model, such as wo.view, wo.content, wo.list etc...";return y[b]=c,z},binding:function(b,c){if(h(),x[b])throw"A binding type has already been set for this object";if(p=p||a.getInheritanceChain(e),-1===p.indexOf(wipeout.base.bindable))throw"You must inherit from wipeout.base.bindable to use global parsers. Alternatively you can inherit from any view model, such as wo.view, wo.content, wo.list etc...";return x[b]=c,z},onlyBindObservables:function(){return this.value("$bindingStrategy",wipeout.settings.bindingStrategies.onlyBindObservables)},bindNonObservables:function(){return this.value("$bindingStrategy",wipeout.settings.bindingStrategies.bindNonObservables)},createObservables:function(){return this.value("$bindingStrategy",wipeout.settings.bindingStrategies.createObservables)},templateId:function(a,b){return b&&wipeout.template.engine.instance.compileTemplate(a,function(){}),z.value("templateId",a)},initialize:function(a){if(!q)throw"The parent class must be, or inherit from wo.view to use this method.";if(s.onInitialized)throw"onInitialized has been defined already";return s.onInitialized=a,z},rendered:function(a){if(!q)throw"The parent class must be, or inherit from wo.view to use this method.";if(s.onRendered)throw"onRendered has been defined already";return s.onRendered=a,z},unRendered:function(a){if(!q)throw"The parent class must be, or inherit from wo.view to use this method.";if(s.onUnrendered)throw"onUnrendered has been defined already";return s.onUnrendered=a,z},dispose:function(a){if(!r)throw"The parent class must be, or inherit from busybody.disposable to use this method.";return z.addFunction("dispose",function(){this._super(),a.call(this)})},initializeApplication:function(a){if(!q)throw"The parent class must be, or inherit from wo.view to use this method.";if(s.onApplicationInitialized)throw"onApplicationInitialized has been defined already";return s.onApplicationInitialized=a,z}};return z}function g(a,b){if(!a||null==b)throw"Invalid input";if(wo[a])throw a+" is already taken!";wo[a]=b}window.wipeout={};var h=function(a){var b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return b.onreadystatechange=function(){b.readyState==XMLHttpRequest.DONE&&(200!=b.status&&0!=b.status||!a.success?a.error&&a.error(b):a.success(b))},b.open(a.type||"GET",a.url||document.location.href,void 0!==a.async?a.async:!0),b.send(),b},i=function(a,b,c){if(a){c=c||window;for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d)}},j=function(a,b,c){if(a&&(c=c||window,null!=a))for(var d in a)b.call(c,a[d],d)},k=function(a,b){var c=window;if(a=q(a),"wipeout"===a[0]&&(c=wipeout,a.splice(0,1),!a.length))throw'Cannot override the "wipeout" variable';for(var d=0,e=a.length-1;e>d;d++)c=c[a[d]]||(c[a[d]]={});return c[a[a.length-1]]=b()},l=/^\s+|\s+$/g,m=function(a){return a?a.replace(l,""):a},n=function(a){return a?m(a).toLowerCase():a},o=function(a){return null==a?!1:(a=n(a),!(!a||"false"===a||"0"===a))},p=function(a){if(!a)return a;for(var b,c=/\-/;-1!==(b=a.search(c));){if(b===a.length-1)return a.substr(0,b);a=a.substr(0,b)+a[b+1].toUpperCase()+a.substr(b+2)}return a},q=function(){var a=/\[\s*\d\s*\]$/g;return function(b){b=b.split(".");for(var c,d=0;d<b.length;d++){b[d]=m(b[d]);var e=b[d].match(a);if(e&&e.length){(c=m(b[d].replace(a,"")))?b[d]=m(b[d].replace(a,"")):(b.splice(d,1),d--);for(var f=0,g=e.length;g>f;f++)b.splice(++d,0,parseInt(e[f].match(/\d/)[0]))}}return b}}();k("wipeout.utils.obj",function(){var a=function(a){var b=[];return i(a,function(a){b.push(isNaN(a)?0===b.length?a:"."+a:"["+a+"]")}),b.join("")},b=function(a,b){return c(q(a),b)},c=function(a,b){b||(b=window);for(var c=0,d=a.length;d>c;c++)if(b=b[a[c]],null==b)return c===d-1?b:null;return b},d=function(a,b,d){return a=q(a),a.length>1&&(b=c(a.splice(0,a.length-1),b)),b?b[a[0]]=d:void 0},e=function(a){if(a instanceof Array)return a.slice();for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},f=function(a){return Math.floor(Math.random()*a)},g=function(a,b){if(b&&a)for(var c in b)a[c]=b[c];return a},k=function(){};return k.extend=g,k.camelCase=p,k.ajax=h,k.parseBool=o,k.trimToLower=n,k.trim=m,k.enumerateArr=i,k.enumerateObj=j,k.getObject=b,k.setObject=d,k.splitPropertyName=q,k.joinPropertyName=a,k.copyArray=e,k.random=f,k}),k("wipeout.settings",function(){function a(a){j(wipeout.settings,function(a,b){"bindingStrategies"!==b&&delete wipeout.settings[b]}),j(a,function(a,b){"bindingStrategies"!==b&&(wipeout.settings[b]=a)})}return a.asynchronousTemplates=!0,a.displayWarnings=!0,a.useElementClassName=!1,a.bindingStrategies={onlyBindObservables:0,bindNonObservables:1,createObservables:2},a.bindingStrategy=a.bindingStrategies.createObservables,a}),k("wipeout.htmlBindingTypes.bindingStrategy",function(){var a;return function(b,c,d){if(!a){a=[];for(var e in wipeout.settings.bindingStrategies)a.push({test:new RegExp("^("+e+")|"+wipeout.settings.bindingStrategies[e]+"$","i"),val:wipeout.settings.bindingStrategies[e]})}for(var f=c.value(!0).replace(/\s/g,""),e=0,g=a.length;g>e;e++)if(a[e].test.test(f))return void(b.$bindingStrategy=a[e].val);throw"Invalid property value. Valid values are: onlyBindObservables (or 0), bindNonObservables (or 1) and createObservables (or 2)"}}),k("wipeout.htmlBindingTypes.viewModelId",function(){return function(a,c,d){d.$this instanceof wipeout.viewModels.view&&(d.$this.templateItems[c.value()]=a);var e=wipeout.htmlBindingTypes.nb(a,c,d)||new b.disposable;return e.registerDisposeCallback(function(){d.$this instanceof wipeout.viewModels.view&&d.$this.templateItems[c.value()]===a&&delete d.$this.templateItems[c.value()]}),e}}),k("wipeout.htmlBindingTypes.shareParentScope",function(){return function(a,b,c){var d=b.value();if(/^\s*[Tt][Rr][Uu][Ee]\s*$/.test(d))a[b.name]=!0;else{if(!/^\s*[Ff][Aa][Ll][Ss][Ee]\s*$/.test(d))throw b.name+' must be either "true" or "false". Dynamic values are not valid for this property.';a[b.name]=!1}}}),k("wipeout.template.initialization.parsers",function(){function a(){}return a.json=function(a,b,c){return JSON.parse(a)},a.string=function(a,b,c){return a},a.bool=function(a,b,c){var d=n(a);return d?"false"!==d&&"0"!==d:!1},a["int"]=function(a,b,c){return parseInt(m(a))},a["float"]=function(a,b,c){return parseFloat(m(a))},a.regexp=function(a,b,c){return new RegExp(m(a))},a.date=function(a,b,c){return new Date(m(a))},a.template=function(a){return a},a.template.useRawXmlValue=!0,a.j=a.json,a.s=a.string,a.b=a.bool,a.i=a["int"],a.f=a["float"],a.r=a.regexp,a.d=a.date,a}),k("wipeout.template.initialization.compiledInitializer",function(){function a(b){this.setters={},j(b.attributes,this.addAttribute,this),i(b,this.addElement,this),this.setters.model||(this.setters.model=a.modelSetter||(a.modelSetter=a.createPropertyValue("model",new wipeout.wml.wmlAttribute("$this.model"))))}a.getPropertyFlags=function(a){var b=wipeout.template.rendering.compiledTemplate.getPropertyFlags(a);return b.name=wipeout.utils.obj.camelCase(b.name),b},a.prototype.addElement=function(b){if(1===b.nodeType){var c=wipeout.utils.viewModels.getElementName(b);if(c=a.getPropertyFlags(c).name,this.setters.hasOwnProperty(c))throw'The property "'+c+'" has been set more than once.';for(var d in b.attributes)if("value"===d||0===d.indexOf("value--"))return i(b,function(a){if(3!==a.nodeType||!a.serialize().match(/^\s*$/))throw"You cannot set the value both in attributes and with elements."}),void(this.setters[c]=a.createPropertyValue(c,b.attributes[d],a.getPropertyFlags(d).flags));var e=b.attributes.parser||b.attributes.parsers;if(!e&&b._parentElement&&b._parentElement.name){var f=wipeout.utils.obj.getObject(wipeout.utils.obj.camelCase(b._parentElement.name));f&&f.getGlobalParser&&(e=f.getGlobalParser(c))}if(!e)for(var g=0,h=b.length;h>g;g++)if(1===b[g].nodeType){var j=wipeout.utils.viewModels.getViewModelConstructor(b[g]);if(!j)throw'Cannot create an instance of element: "'+b[g].name+'"';return b[g].$cachedVmContructor=j.constructor,void(this.setters[c]=a.createPropertyValue(c,b[g],["templateElementSetter"]))}e&&e.constructor===Function?(this.setters[c]=a.createPropertyValue(c,b),this.setters[c].parser=e):e?this.setters[c]=a.createPropertyValue(c,b,a.getPropertyFlags("--"+e.value).flags):this.setters[c]=a.createPropertyValue(c,b)}};var b="$wipeout_binding_type";return a.createPropertyValue=function(a,c,d){var e,f;if(d)for(var g=0,h=d.length;h>g;g++)if(wipeout.htmlBindingTypes[d[g]]){if(f)throw"The binding type has already been set for this element";f=d[g]}else if(wipeout.template.initialization.parsers[d[g]]){if(e)throw"The parser has already been set for this element";e=d[g]}var i=new wipeout.template.initialization.viewModelPropertyValue(a,c,e);return i[b]=f,i},a.prototype.addAttribute=function(b,c){if(c=a.getPropertyFlags(c),this.setters[c.name])throw'The property "'+c.name+'" has been set more than once.';this.setters[c.name]=a.createPropertyValue(c.name,b,c.flags)},a.prototype.initialize=function(b,c,d){var e;if(d)e=this.applyToViewModel(d,b,c);else{e=this.setters.bindingStrategy?this.applyToViewModel("bindingStrategy",b,c):[],(this.setters.model!==a.modelSetter||null==b.model)&&e.push.apply(e,this.applyToViewModel("model",b,c));for(var f in this.setters)"bindingStrategy"!==f&&"model"!==f&&e.push.apply(e,this.applyToViewModel(f,b,c))}return function(){i(e.splice(0,e.length),function(a){a&&a.dispose()})}},a.prototype.applyToViewModel=function(b,c,d){if(!this.setters[b])return[];var e=a.getBindingType(this.setters[b],c);if(!wipeout.htmlBindingTypes[e])throw'Invalid binding type :"'+e+'" for property: "'+b+'".';var f=[];return f.push.apply(f,this.setters[b].prime(c,d,function(){var a=wipeout.htmlBindingTypes[e](c,this.setters[b],d);a&&a.dispose instanceof Function?f.push(a):a instanceof Function&&f.push({dispose:a})}.bind(this))),f},a.getBindingType=function(a,c){return a[b]||c instanceof wipeout.base.bindable&&c.getGlobalBindingType(a.name)||"ow"},a}),k("wipeout.utils.dictionary",function(){var b=a.extend(function(){this.__keyArray=[],this.__valueArray=[]});return b.prototype.add=function(a,b){var c=this.__keyArray.indexOf(a);return-1===c?(this.__keyArray.push(a),this.__valueArray.push(b)):this.__valueArray[c]=b,b},b.prototype.length=function(){return this.__keyArray.length},b.prototype.keys=function(){return this.keys_unsafe().slice()},b.prototype.keys_unsafe=function(){return this.__keyArray},b.prototype.values=function(){return this.values_unsafe().slice()},b.prototype.values_unsafe=function(){return this.__valueArray},b.prototype.remove=function(a){var b;return-1!==(b=this.__keyArray.indexOf(a))?(this.__valueArray.splice(b,1),this.__keyArray.splice(b,1),!0):!1},b.prototype.value=function(a){return this.__valueArray[this.__keyArray.indexOf(a)]},b.prototype.clear=function(){this.__valueArray.length=0,this.__keyArray.length=0},b}),k("wipeout.base.bindable",function(){var a=b.observable.extend(function(){this._super()}),c="__wipeoutGlobalParser_";a.addGlobalParser=function(a,b){if("string"==typeof b&&(b=wipeout.template.initialization.parsers[b]),!(b instanceof Function))throw"Invalid parser. Parsers must be either a string which points to wipeout parser, or a function which will parse the data";var d=c+a;if(this.prototype.hasOwnProperty(d)){if(this.prototype[d]===b)return;throw"A global parser has already been defined for this property"}this.prototype[d]=b},a.prototype.addGlobalParser=function(b,c){return a.addGlobalParser.apply(this.constructor,arguments)};var d="__wipeoutGlobalBinding_";return a.addGlobalBindingType=function(a,b){if("string"!=typeof b||!wipeout.htmlBindingTypes[b])throw"Invalid binding type. Binding types must be a string which points to wipeout binding type";var c=d+a;if(this.prototype.hasOwnProperty(c)){if(this.prototype[c]===b)return;throw"A global binding has already been defined for this property"}this.prototype[c]=b},a.prototype.addGlobalBindingType=function(b,c){return a.addGlobalBindingType.apply(this.constructor,arguments)},a.prototype.getGlobalParser=function(a){return this[c+a]},a.prototype.getGlobalBindingType=function(a){return this[d+a]},a.getGlobalParser=function(a){return this.prototype[c+a]},a.getGlobalBindingType=function(a){return this.prototype[d+a]},a}),k("wipeout.wml.wmlPart",function(){return function(){}}),k("wipeout.viewModels.view",function(){var a=wipeout.base.bindable.extend(function(a,b){this._super(),this.shareParentScope=!1,this.templateItems={},this.templateId=a,this.observe("model",this._onModelChanged,{context:this,activateImmediately:!0}),this.model=null==b?null:b});return a.$synchronusTemplateChangeEvent="$synchronusTemplateChange",a.addGlobalBindingType("bindingStrategy","bindingStrategy"),a.addGlobalBindingType("shareParentScope","shareParentScope"),a.addGlobalParser("id","string"),a.addGlobalBindingType("id","viewModelId"),a.prototype.getParent=function(){var a=this.getRenderContext();return a?a.$this===this?a.$parent:a.$this:null},a.prototype.getParents=function(){var a=this.getRenderContext();if(!a)return[];var b=a.$parents.slice();return a.$this!==this&&b.splice(0,0,a.$this),b},a.prototype.getRenderContext=function(){return this.$domRoot&&this.$domRoot.renderContext||null},a.prototype._onModelChanged=function(a,b){a!==b&&this.onModelChanged(b)},a.prototype.onModelChanged=function(a){if(this.disposeOf(this.$modelRoutedEventKey),this.$modelRoutedEventKey=null,a instanceof wipeout.events.routedEventModel){var b=wipeout.events.event.instance.register(a,wipeout.events.routedEventModel.triggerRoutedEvent,this._onModelRoutedEvent,this);this.$modelRoutedEventKey=this.registerDisposable(b)}},a.prototype._onModelRoutedEvent=function(a){this.triggerRoutedEvent(a.routedEvent,a.eventArgs)},a.prototype.dispose=function(){this._super(),this.$routedEventSubscriptions&&this.$routedEventSubscriptions.dispose()},a.prototype.synchronusTemplateChange=function(b){arguments.length&&(this.templateId=b),wipeout.events.event.instance.trigger(this,a.$synchronusTemplateChangeEvent)},a.visualGraph=function(a,b){throw"Not implemented exception"},a.prototype.onRendered=function(){i(this.$onRendered,function(a){a.call(this)},this)},a.prototype.onUnrendered=function(){i(this.$onUnrendered,function(a){a.call(this)},this)},a.prototype.onApplicationInitialized=function(){i(this.$onApplicationInitialized,function(a){a.call(this)},this)},a.prototype.onInitialized=function(){i(this.$onInitialized,function(a){a.call(this)},this)},a}),k("wipeout.template.rendering.renderedContent",function(){var a,c,d=b.disposable.extend(function(b,d,e,f){this._super(),d=wipeout.utils.obj.trim(d),this.parentRenderContext=e,f?this.helper=c||(c=new wipeout.template.rendering.renderedContentElementHelper):this.helper=a||(a=new wipeout.template.rendering.renderedContentCommentHelper);var g=this.helper.init(this,b,d);this.openingTag=g.opening,this.openingTag.wipeoutOpening=this,this.closingTag=g.closing,this.closingTag.wipeoutClosing=this});return d.prototype.rename=function(a){this.helper.rename(this,a)},d.prototype.renderArray=function(a){this.asynchronous&&(this.asynchronous.cancel(),delete this.asynchronous),this.unRender();var c=new wipeout.template.rendering.renderedArray(a,this);this.disposeOfBindings=c.dispose.bind(c),a instanceof b.array&&c.registerDisposable(a.observe(c.render,{context:c,useRawChanges:!0})),c.render([{type:"splice",addedCount:a.length,removed:[],index:0}])},d.prototype.render=function(a,b){return a instanceof Array?void this.renderArray(a):(this.unRender(),this.viewModel=a,void(null!=this.viewModel&&(this.renderContext=this.parentRenderContext?this.parentRenderContext.contextFor(this.viewModel,b):new wipeout.template.context(this.viewModel,null,b),this.viewModel instanceof wipeout.viewModels.view?(this.templateChangeKey=this.registerDisposable(wipeout.events.event.instance.register(this.viewModel,wipeout.viewModels.view.$synchronusTemplateChangeEvent,this.templateHasChanged,this)),this.viewModel.$domRoot=this,this.templateObserved=this.viewModel.observe("templateId",this._template,{context:this,activateImmediately:!0}),this.viewModel.templateId&&this.template(this.viewModel.templateId)):this.appendHtml(this.viewModel.toString()))))},d.prototype.templateHasChanged=function(){this.template(this.viewModel.templateId)},d.prototype._template=function(a,b){this.template(b)},d.prototype.unRender=function(a){this.unTemplate(a),this.templateObserved&&(this.templateObserved.dispose(),delete this.templateObserved),this.templateChangeKey&&(this.disposeOf(this.templateChangeKey),delete this.templateChangeKey),this.viewModel instanceof wipeout.viewModels.view&&delete this.viewModel.$domRoot,delete this.renderContext,delete this.viewModel},d.prototype.unTemplate=function(a){delete this.currentTemplate,this.disposeOfBindings&&(this.disposeOfBindings(),delete this.disposeOfBindings),a||this.helper.empty(this)},d.prototype.template=function(a){if(this.asynchronous&&this.asynchronous.cancel(),this.currentTemplate!==a&&(this.__initialTemplate&&this.unTemplate(),a&&(this.asynchronous=wipeout.template.engine.instance.compileTemplate(a,function(c){delete this.asynchronous,b&&(b.parentNode.removeChild(b),b=null),this.currentTemplate=a,this.disposeOfBindings=c.quickBuild(this.appendHtml.bind(this),this.renderContext),this.__initialTemplate=!0,this.viewModel.onRendered()}.bind(this)),this.asynchronous))){var b=wipeout.utils.html.createTemplatePlaceholder(this.viewModel);this.closingTag.parentNode.insertBefore(b,this.closingTag)}},d.prototype.dispose=function(a){this._super(),this.closingTag&&(this.unRender(a),a||this.detatched||this.helper.disposeOf(this),this.detatched=null,this.closingTag.wipeoutClosing=null,this.openingTag.wipeoutOpening=null,this.closingTag=null,this.openingTag=null)},d.prototype.appendHtml=function(a){this.helper.appendHtml(this,a)},d.getParentElement=function(a){for(var b=a.wipeoutClosing?a.wipeoutClosing.openingTag:a;b=b.previousSibling;){if(b.wipeoutOpening)return b;b.wipeoutClosing&&(b=b.wipeoutClosing.openingTag)}return a.parentNode},d}),k("wipeout.template.rendering.renderedContentHelperBase",function(){var b=a.extend(function(){if(this._super(),this.constructor===b)throw"Abstract classes must be overridden."});return b.prototype.init=function(a,b,c){throw"Abstract methods must be overridden"},b.prototype.rename=function(a,b){throw"Abstract methods must be overridden"},b.prototype.empty=function(a){throw"Abstract methods must be overridden"},b.prototype.disposeOf=function(a){throw"Abstract methods must be overridden"},b.prototype.appendHtml=function(a,b){throw"Abstract methods must be overridden"},b.prototype.prepend=function(a,b){throw"Abstract methods must be overridden"},b.prototype.insertBefore=function(a,b){i(b,function(a){this.parentNode.insertBefore(a,this)},a.openingTag)},b.prototype.insertAfter=function(a,b){a.closingTag.nextSibling?a.closingTag.parentNode.insertBefore(b[b.length-1],a.closingTag.nextSibling):a.closingTag.parentNode.appendChild(b[b.length-1]);for(var c=b.length-2;c>=0;c--)b[c+1].parentNode.insertBefore(b[c],b[c+1])},b.prototype.detatch=function(a){throw"Abstract methods must be overridden"},b.prototype.allHtml=function(a){throw"Abstract methods must be overridden"},b}),k("wipeout.template.propertyValue",function(){var c=a.extend(function(a,b,c){if(this._super(),this.name=a,this._value=b,this.parser=null,c instanceof Function)this.parser=c;else if(c){if(!wipeout.template.initialization.parsers[c])throw"Invalid parser: "+c;this.parser=wipeout.template.initialization.parsers[c]}});c.prototype.value=function(a){return a?this.hasOwnProperty("_unAlteredCachedValue")?this._unAlteredCachedValue:this._unAlteredCachedValue=this._value.serializeContent():this.hasOwnProperty("_cachedValue")?this._cachedValue:this._cachedValue=c.replace$model(this._value.serializeContent())},c.replace$model=function(a){a=wipeout.utils.jsParse.removeCommentsTokenStrings(a);for(var b,c,d,e=/\$model(?![\w\$]|(\s*\:))/g;b=e.exec(a.output);){for(d=!0,c=b.index-1;c>=0;c--)if(!/\s/.test(a.output[c])){("."===a.output[c]||c===b.index-1&&/[\w\$]/.test(a.output[c]))&&(d=!1);break}d&&(a.output=a.output.substring(0,b.index+1)+"this."+a.output.substring(b.index+1))}if(/(^|\s)var\s+\$this\.model/.test(a.output))throw"You cannot define a $model variable in this scope. $model is reserved for the model of the curren view model.";return a.addTokens(a.output)},c.prototype.buildGetter=function(){if(!this._getter){var a,b=wipeout.utils.jsParse.removeCommentsTokenStringsAndBrackets(a=this.value()),c=b.output.split("=>");if(c.length>2)throw"Invalid attribute value: "+a+". You may only include 1 filter.";if(2===c.length){if(c[1]=m(c[1]),!wipeout.template.filters[c[1]])throw"Invalid filter: "+c[1];a=wipeout.template.filters[c[1]].downward?'wipeout.template.filters["'+c[1]+'"].downward('+c[0]+")":c[0].split(",")[0]}this._getter=wipeout.template.context.buildGetter(b.addTokens(a))}return this._getter},c.prototype.getter=function(){this.primed();var a=this.getParser(),b=this.renderContext;if(a)return function(){return a(a.useRawXmlValue?this._value:this.value(!0),this.name,b)}.bind(this);var c=this.buildGetter();return function(){return c.apply(null,b.asGetterArgs())}},c.prototype.buildSetter=function(){if(!this.hasOwnProperty("_setter")){var a,b,c=wipeout.utils.jsParse.removeCommentsTokenStringsAndBrackets(a=this.value()),d=c.output.split("=>");if(d.length>2)throw"Invalid attribute value: "+a+". You may only include 1 filter.";if(2===d.length){if(d[1]=m(d[1]),!wipeout.template.filters[d[1]])throw"Invalid filter: "+d[1];wipeout.template.filters[d[1]].upward?(b='wipeout.template.filters["'+d[1]+'"].upward',d=d[0].split(/\s*\,\s*/),a=c.addTokens(d[0]),d[0]="arguments[5]",b+="("+d.join(", ")+")"):a=c.addTokens(d[0].split(",")[0])}var e=/\.\s*[\w\$]+\s*$/.exec(a);if(e){var f=wipeout.template.context.buildGetter(a.substring(0,a.length-e[0].length));e=e[0].replace(/(^\s*\.+\s*)|(\s*$)/g,""),b?(b=wipeout.template.context.buildGetter(c.addTokens(b)),this._setter=function(a,c){var d=a.asGetterArgs().slice(),g=f.apply(null,d);return d.push(c),g?(g[e]=b.apply(null,d),!0):!1}):this._setter=function(a,b){var c=f.apply(null,a.asGetterArgs());return c?(c[e]=b,!0):!1}}else this._setter=null}return this._setter},c.prototype.canSet=function(){return!this.getParser()&&!!this.buildSetter()},c.prototype.getParser=function(){return this.primed(),this.parser||this.propertyOwner instanceof wipeout.base.bindable&&this.propertyOwner.getGlobalParser(this.name)},c.prototype.setter=function(){if(!this.canSet())throw"You cannot set the value of: "+this.value(!0)+".";var a=this.renderContext;return function(b){return this.buildSetter()(a,b)}.bind(this)};var d={dispose:function(){}};return c.prototype.watch=function(a,c){if(this.primed(),this.getParser()||/^\s*((true)|(false)|(\d+(\.\d+)?)|(\/(?!\/)))\s*$/.test(this.value()))return void(c&&a(void 0,this.getter()()));if(/^([\$\w\s\.]|(\[\d+\]))+$/.test(this.value())){var e=wipeout.utils.obj.splitPropertyName(this.value());if(1===e.length)return d;var f=b.observe(this.renderContext[e.splice(0,1)[0]],wipeout.utils.obj.joinPropertyName(e),a,this.getBindingStrategyOptions());return f&&this._caching.push(f),c&&a(void 0,this.getter()()),f||d}var f=this.renderContext.getComputed(this.buildGetter(),this.getBindingStrategyOptions());return this._caching.push(f),f.onValueChanged(a,c)},c.prototype.getBindingStrategyOptions=function(){this.primed();var a=this.renderContext.$this.hasOwnProperty("$bindingStrategy")?this.renderContext.$this.$bindingStrategy:wipeout.settings.bindingStrategy;return a===wipeout.settings.bindingStrategies.bindNonObservables?{trackPartialObservable:!0}:a===wipeout.settings.bindingStrategies.createObservables?{forceObserve:!0}:void 0},c.prototype.prime=function(a,b,c){if(this._caching)throw"prime cannot be asynchronus or nested.";try{return this._caching=[],this.propertyOwner=a,this.renderContext=b,c(),this._caching}finally{this._caching=null,this.propertyOwner=null,this.renderContext=null}},c.prototype.primed=function(){if(!this._caching)throw'The setter must be primed to make this call. Use the "prime(...)" function and pass in the logic to execute in a primed context.'},c}),k("wipeout.debug",function(){return{renderedItems:function(a,b){var c,d=[],e=function(a){if(a)switch(a.nodeType){case 1:i(a.childNodes,e);case 8:!(c=wipeout.utils.html.getViewModel(a))||-1!==d.indexOf(c)||b&&c.constructor!==b||d.push(c)}};return e(a||document.getElementsByTagName("body")[0]),d}}}),k("wipeout.events.event",function(){function a(){this.objects=new wipeout.utils.dictionary}function c(){this.dictionary=new a}a.prototype.add=function(a,c,d){var e;return(e=this.objects.value(a))||this.objects.add(a,e={}),e[c]?e[c].push(d):e[c]=[d],new b.disposable(function(){var b,e=this.objects.value(a);if(e&&e[c]&&-1!==(b=e[c].indexOf(d))&&(e[c].splice(b,1),!e[c].length)){delete e[c];for(var f in e)return;this.objects.remove(a)}}.bind(this))},a.prototype.callbacks=function(a,b){var c;return(c=this.objects.value(a))&&c[b]};var d={};return c.prototype.registerForAll=function(a,b,c,e){return b=b.bind(c),b.priority=e||0,this.dictionary.add(d,a,b)},c.prototype.register=function(a,b,c,d,e){return c=c.bind(d),c.priority=e||0,this.dictionary.add(a,b,c)},c.prototype.trigger=function(a,b,c){var e=this.dictionary.callbacks(a,b)||[];e.push.apply(e,this.dictionary.callbacks(d,b)),e.sort(function(a,b){return a.priority<b.priority}),i(e,function(b){b(c,a)},this)},c.prototype.dispose=function(){this.dictionary.objects.clear()},c.instance=new c,c}),k("wipeout.events.routedEventArgs",function(){var a=function(a,b){this.handled=!1,this.data=a,this.originator=b};return a}),k("wipeout.events.routedEventModel",function(){var b="routed-event",c=a.extend(function(){this._super()});return c.triggerRoutedEvent="__triggerRoutedEventOnVM",c.prototype.triggerRoutedEvent=function(a,b){wipeout.events.event.instance.trigger(this,c.triggerRoutedEvent,{routedEvent:a,eventArgs:b})},c.prototype.routedEventTriggered=function(a,c){this.__routedEventSubscriptions&&!c.handled&&this.__routedEventSubscriptions.trigger(a,b,a)},c.prototype.registerRoutedEvent=function(a,c,d,e){return this.__routedEventSubscriptions||(this.__routedEventSubscriptions=new wipeout.events.event),this.__routedEventSubscriptions.register(a,b,c,d||this,e)},c}),k("wipeout.htmlBindingTypes.ifTemplateProperty",function(){return function(a,b,c){var d=wipeout.htmlBindingTypes.templateProperty(a,b,c);return a instanceof wipeout.viewModels["if"]&&a.reEvaluate(),d}}),k("wipeout.htmlBindingTypes.nb",function(){return function(a,b,c){a[b.name]=b.getter()()}}),k("wipeout.htmlBindingTypes.ow",function(){return function(a,b,c){b.watch(function(c,d){a[b.name]=d},!0)}}),k("wipeout.htmlBindingTypes.owts",function(){return function(a,b,c){var d=b.setter();b.onPropertyChanged(function(a,b){d(b)},!0)}}),k("wipeout.htmlBindingTypes.setTemplateToTemplateId",function(){return function(a,b,c){a.templateId=wipeout.viewModels.content.createAnonymousTemplate(b._value)}}),k("wipeout.htmlBindingTypes.templateElementSetter",function(){return function(a,c,d){if(!c._value.$cachedVmContructor){var e=wipeout.utils.viewModels.getViewModelConstructor(c._value);if(!e)throw'Invalid view model name "'+wipeout.utils.viewModels.getElementName(c._value)+'".';c._value.$cachedVmContructor=e.constructor}a[c.name]=new c._value.$cachedVmContructor;var f=new b.disposable(wipeout.template.engine.instance.getVmInitializer(c._value).initialize(a[c.name],d));return a[c.name].dispose instanceof Function&&f.registerDisposable(a[c.name]),f}}),k("wipeout.htmlBindingTypes.templateProperty",function(){return function(a,b,c){a[b.name+"Id"]=wipeout.viewModels.content.createAnonymousTemplate(b._value)}}),k("wipeout.htmlBindingTypes.tw",function(){return function(a,c,d){var e;if(c.getParser()||!/^([\$\w\s\.]|(\[\d+\]))+$/.test(e=c.value()))throw'Setter "'+e+'" must reference only one value when binding back to the source.';

var f=b.utils.obj.splitPropertyName(e);return b.getObserver(d[f[0]])?(d=d[f[0]],e=b.utils.obj.joinPropertyName(f.slice(1))):"$parents"===f[0]&&d.$parents&&b.getObserver(d.$parents[f[1]])&&(d=d.$parents[f[1]],e=b.utils.obj.joinPropertyName(f.slice(2))),b.tryBind(d,e,a,c.name,!0)}}),k("wipeout.polyfills.Array",function(){var a=function(){};return a.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;d>c;c++)if(this[c]===a)return c;return-1},j(a.prototype,function(a,b){Array.prototype[b]||(Array.prototype[b]=a)}),a}),k("wipeout.polyfills.Function",function(){var a=function(){};return a.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}},j(a.prototype,function(a,b){Function.prototype[b]||(Function.prototype[b]=a)}),a}),k("wipeout.profile.highlightVM",function(){var b=a.extend(function(a,b){this.vm=a,this.cssClass=b,this.nodes=a.entireViewModelHtml(),wipeout.utils.obj.enumerateArr(this.nodes,function(a){a.classList&&a.classList.add(this.cssClass)},this)});return b.prototype.dispose=function(){wipeout.utils.obj.enumerateArr(this.nodes,function(a){a.classList&&a.classList.remove(this.cssClass)},this)},b}),k("wipeout.profile.highlighter",function(){function a(){this.style=document.createElement("style"),this.index=0,this.styles=["wipeout-profiler-"+a.newId(),"wipeout-profiler-"+a.newId(),"wipeout-profiler-"+a.newId(),"wipeout-profiler-"+a.newId(),"wipeout-profiler-"+a.newId()];for(var b=0,c=this.styles.length;c>b;b++)this.style.innerHTML+=" ."+this.styles[b]+" {background-color:#"+a.generateColour()+" !important; cursor: pointer !important}";document.head.appendChild(this.style),this.currentHighlighter={dispose:function(){}};var d=this;this.eventHandler=function(a){d.highlightVM(a)},window.addEventListener("mousemove",this.eventHandler,!1)}return a.newId=function(){var a=0;return function(){return++a}}(),a.generateColour=function(){var a=Math.floor((wipeout.utils.obj.random(255)+255)/2),b=Math.floor((wipeout.utils.obj.random(255)+255)/2),c=Math.floor((wipeout.utils.obj.random(255)+255)/2);return a.toString(16)+b.toString(16)+c.toString(16)},a.prototype.nextStyle=function(){return this.index>=this.styles.length-1?this.index=0:this.index++,this.styles[this.index]},a.prototype.highlightVM=function(a){var b=document.elementFromPoint(a.clientX,a.clientY);if(b!==this.currentElement){this.currentElement=b;var c=wipeout.utils.html.getViewModel(this.currentElement);if(c&&c!==this.currentHighlighter.vm){var d=this.__timeoutToken={},e=this;setTimeout(function(){e.__timeoutToken===d&&(e.currentHighlighter.dispose(),e.currentHighlighter=new wipeout.profile.highlightVM(c,e.nextStyle()))},100)}}},a.prototype.dispose=function(){this.style.parentNode&&this.style.parentNode.removeChild(this.style),delete this.__timeoutToken,window.removeEventListener("mousemove",this.eventHandler),this.currentHighlighter.dispose()},a}),k("wipeout.profile.profile",function(){return function(){}}),k("wipeout.template.context",function(){function a(a,c,d){if(a&&a.shareParentScope)throw"You cannot create a template context for a view model with a shared parent scope";this.$this=a,c?(this.$parentContext=c,this.$parent=c.$this,this.$parents=[c.$this],this.$parents.push.apply(this.$parents,c.$parents)):(this.$parentContext=null,this.$parent=null,this.$parents=[]),null!=d&&(this.$index=new b.observable,this.$index.value=d)}function d(){}d.prototype=window,a.prototype=new d,a.prototype.find=function(a,b){return(this._finder||(this._finder=new wipeout.utils.find(this))).find(a,b)},a.prototype.contextFor=function(b,d){return b.shareParentScope&&null!=d&&c("If an item in an array is to be rendered with shareParentScope set to true, this item will not have an $index value in it's renered context"),b&&b.shareParentScope?this:new a(b,this,d)},a.prototype.asGetterArgs=function(){return this.getterArgs||(this.getterArgs=[this,this.$this,this.$parent,this.$parents,this.$index])},a.prototype.asWatchVariables=function(){return this.watchVariables||(this.watchVariables={$context:this,$this:this.$this,$parent:this.$parent,$parents:this.$parents,$index:this.$index})},a.prototype.asEventArgs=function(a,b){var c=this.asGetterArgs().slice();return c.push(a),c.push(b),c},a.prototype.getComputed=function(a,c){return c=c||{},c.watchVariables=this.asWatchVariables(),new b.observeTypes.computed(a,c)},a.buildGetter=function(a){try{return new Function("$context","$this","$parent","$parents","$index","return "+a+";")}catch(b){throw"Invalid function logic. Function logic must contain only one line of code and must not have a 'return' statement "}};var e=/^\s*[Ll]ogic\s*:/;return a.buildEventCallback=function(a){e.test(a)?a=a.replace(e,""):/\)[\s;]*$/.test(a)||(a+="(e, element)");try{return new Function("$context","$this","$parent","$parents","$index","e","element",a)}catch(b){throw"Invalid function logic. Function logic must contain only one line of code and must not have a 'return' statement "}},a}),k("wipeout.template.engine",function(){function a(){this.templates={},this.xmlIntializers=new wipeout.utils.dictionary}a.prototype.setTemplate=function(a,b){if(!a)throw"Invalid template id";return"string"==typeof b?b=wipeout.wml.wmlParser(b):2===b.nodeType&&(b=wipeout.wml.wmlParser(b.value)),this.templates[a]=new wipeout.template.rendering.compiledTemplate(b)},a.prototype.getTemplateXml=function(a,c){return a=b(a),this.compileTemplate(a,function(){c(this.templates[a].xml)}.bind(this))};var b=function(){var a;return function(b){return b||a||(a=wipeout.viewModels.content.createAnonymousTemplate(""))}}();return a.prototype.compileTemplate=function(a,c){if(a=b(a),this.templates[a]instanceof wipeout.template.rendering.compiledTemplate)return c(this.templates[a]),null;if(this.templates[a]instanceof wipeout.template.loader)return this.templates[a].add(function(b){this.templates[a]instanceof wipeout.template.loader&&this.setTemplate(a,b),this.compileTemplate(a,c)}.bind(this));if(!this.templates[a]){var d;if(d=document.getElementById(a))return c(this.setTemplate(a,"script"===n(d.tagName)?d.text:d.innerHTML)),null;if(wipeout.settings.asynchronousTemplates)return this.templates[a]=new wipeout.template.loader(a),this.compileTemplate(a,c)}throw'Could not load template "'+a+'".'},a.prototype.getVmInitializer=function(a){var b;return(b=this.xmlIntializers.value(a))?b:this.xmlIntializers.add(a,new wipeout.template.initialization.compiledInitializer(a))},a.instance=new a,a}),k("wipeout.template.filters",function(){return function(){}}),k("wipeout.template.initialization.viewModelPropertyValue",function(){var a=wipeout.template.propertyValue.extend(function(a,b,c){this._super(a,b,c)});return a.prototype.onPropertyChanged=function(a,c){this.primed();var d=b.tryObserve(this.propertyOwner,this.name,a);return d&&this._caching.push(d),c&&a(void 0,wipeout.utils.obj.getObject(this.name,this.propertyOwner)),!!d},a}),k("wipeout.template.loader",function(){function a(a){this._callbacks=[],this.templateName=a,wipeout.utils.obj.ajax({type:"GET",url:a,success:function(a){this._success=!0;var b=this._callbacks;delete this._callbacks,this.templateValue=a.responseText;for(var c=0,d=b.length;d>c;c++)b[c](this.templateValue)}.bind(this),error:function(){throw delete this._callbacks,this._success=!1,'Could not locate template "'+a+'"'}.bind(this)})}return a.prototype.add=function(a){if(this._callbacks)return this._callbacks.push(a),{cancel:function(){var b;this._callbacks&&-1!==(b=this._callbacks.indexOf(a))&&this._callbacks.splice(b,1)}.bind(this)};if(this._success)return a(this.templateValue),null;throw'Could not load template "'+this.templateName+'"'},a}),k("wipeout.template.rendering.builder",function(){function a(b){this.elements=[];var c=[];i(b.html,function(b){if("string"==typeof b)c.push(b);else{var d=a.uniqueIdGenerator();c.push(' id="'+d+'"'),this.elements.push({id:d,actions:b})}},this),this.html=c.join("")}var b="wipeout_placeholder_id_";return a.uniqueIdGenerator=function(){var a=Math.floor(1e9*Math.random());return function(){return b+ ++a}}(),a.applyToElement=function(a,b,c,d){var e=[];return e.push.apply(e,a.prime(b,c,function(){var d=wipeout.template.rendering.htmlAttributes[a.action||a.name](b,a,c);d&&d.dispose instanceof Function?e.push(d):d instanceof Function&&e.push({dispose:d})},d)),e},a.prototype.execute=function(b){var c=[];return i(this.elements,function(d){var e=document.getElementById(d.id);e&&(e.removeAttribute("id"),i(d.actions,function(f){c.push.apply(c,a.applyToElement(f,e,b,d.actions))}))},this),function(){i(c.splice(0,c.length),function(a){a.dispose()})}},a}),k("wipeout.template.rendering.compiledTemplate",function(){function a(a){this.xml=a,this.html=[],this._addedElements=[],i(a,this.addNode,this);for(var b=this.html.length-1;b>0;b--)"string"==typeof this.html[b]&&"string"==typeof this.html[b-1]&&(this.html[b-1]+=this.html.splice(b,1)[0]);delete this._addedElements}a.getPropertyFlags=function(a){var b=a.indexOf("--");return-1===b?{flags:[],name:a}:{flags:a.substr(b+2).toLowerCase().split("-"),name:a.substr(0,b)}},a.prototype.addNonElement=function(a){this.html.push(a.serialize())};var b="{{",c="}}";return a.renderParenthesis=function(a,d){b=a,c=d},a.prototype.addTextNode=function(a){for(var d=a.serialize(),e=0,f=0;-1!==(f=d.indexOf(b,e));){if(this.html.push(d.substring(e,f)),e=f+b.length,-1===(f=d.indexOf(c,e)))throw"TODE";this.html.push("<script"),this.html.push([new wipeout.template.rendering.htmlPropertyValue("wo-render",d.substring(e,f))]),this.html.push(' type="placeholder"></script>'),e=f+b.length}this.html.push(d.substr(e))},a.prototype.addViewModel=function(a){this.html.push("<script"),this.html.push([new wipeout.template.rendering.htmlPropertyValue("wipeoutCreateViewModel",a)]),this.html.push(' type="placeholder"></script>')},a.getAttributeName=function(a){if(wipeout.template.rendering.htmlAttributes[a])return a;for(var b in wipeout.template.rendering.dynamicHtmlAttributes)if(wipeout.template.rendering.dynamicHtmlAttributes[b].test(a))return b},a.prototype.addAttributes=function(b){var c,d;j(b,function(b,e){var f=a.getPropertyFlags(e);if(e=f.name,f=f.flags,d=!1,d=a.getAttributeName(e)){c||this.html.push(c=[]);for(var g,h=0,i=f.length;i>h;h++)if(wipeout.template.initialization.parsers[f[h]]){if(g)throw"The parser has already been set for this element";g=f[h]}d!==e?c.push(new wipeout.template.rendering.htmlPropertyValue(e,b,g,d)):"id"===e?c.splice(0,0,new wipeout.template.rendering.htmlPropertyValue(e,b,g)):c.push(new wipeout.template.rendering.htmlPropertyValue(e,b,g))}else this.html.push(" "+e+b.serializeValue())},this)},a.prototype.addElement=function(a){this.html.push("<"+a.name),this.addAttributes(a.attributes),a.inline?this.html.push(" />"):(this.html.push(">"),i(a,function(a){this.addNode(a)},this),this.html.push("</"+a.name+">"))},a.prototype.addNode=function(a){if(-1!==this._addedElements.indexOf(a))throw"Infinite loop";this._addedElements.push(a),3===a.nodeType?this.addTextNode(a):1!==a.nodeType?this.addNonElement(a):wipeout.utils.viewModels.getViewModelConstructor(a)?this.addViewModel(a):this.addElement(a)},a.prototype.quickBuild=function(a,b){var c=this._builder||(this._builder=this.getBuilder());return a(c.html),c.execute(b)},a.prototype.getBuilder=function(){return new wipeout.template.rendering.builder(this)},a}),d("attr",function(){function a(a,c,d){if(b(c.name)){var e=c.name.substr(c.name.indexOf("attr-")+5);c.watch(function(b,c){a.getAttribute(e)!==c&&a.setAttribute(e,c)},!0)}}var b=a.test=function(a){return/^\s*(data\-)?wo\-attr\-./.test(a)};return a}),d("checked-value",function(){function a(a,b,c){return c?c():a.hasAttribute("value")?a.getAttribute("value"):!0}function b(a,b,c){return c||a.hasAttribute("value")?null:!1}function c(a){for(var b=document.querySelectorAll('input[type=radio][name="'+a.replace('"','\\"')+'"]'),c=0,d=b.length;d>c;c++)if(b[c].checked)return!1;return!0}return function(d,e,f){function g(f){d.checked?i(a(d,e,h)):"radio"!==d.type?i(b(d,e,h)):!f&&c(d.name)&&i(null)}if(!e.canSet())throw'Cannot bind to the property "'+e.value(!0)+'".';var h;e.otherAttribute("value",function(a){h=a.getter()}),d.checked||a(d,e,h)!==e.getter()()||d.setAttribute("checked","checked");var i=e.setter();g(!0),e.onElementEvent(d.getAttribute("wo-on-event")||d.getAttribute("data-wo-on-event")||"change",g),e.otherAttribute("value",function(a){a.watch(function(a,b){d.hasAttribute("checked")&&i(b)})})}}),d("class",function(){function a(a,b,c){var d,h=b.name.substr(b.name.indexOf("class-")+6),i=b.getter();!(d=e(a,h))&&i()?f(a,h):d&&!i()&&g(a,h),b.watch(function(b,c){!b&&c?f(a,h):b&&!c&&g(a,h)},!1)}function b(b,d,e){if(c(d.name)){if(wipeout.settings.useElementClassName||!b.classList)return a(b,d,e);var f=d.name.substr(d.name.indexOf("class-")+6);d.getter()()?b.classList.add(f):b.classList.remove(f),d.watch(function(a,c){c?b.classList.add(f):b.classList.remove(f)},!1)}}var c=b.test=function(a){return/^\s*(data\-)?wo\-class\-./.test(a)},d=function(a){return new RegExp("(?:^|\\s)"+a+"(?!\\S)","g")},e=function(a,b){return d(b).test(a.className)},f=function(a,b){e(a,b)||(a.className=m(a.className+(a.className.length?" ":"")+b))},g=function(a,b){var c;(c=d(b)).test(a.className)&&(a.className=m(a.className.replace(c,"")))};return b}),d("content",function(){return function(a,b,c){b.watch(function(b,c){a.innerHTML=null==c?"":c},!0)}}),d("data",function(){return function(a,b,c){b.setData(a,"wo-data",b)}}),d("event",function(){function a(a,c,d){b(c.name)&&c.onElementEvent(c.name.substr(c.name.indexOf("event-")+6))}var b=a.test=function(a){return/^\s*(data\-)?wo\-event\-./.test(a)};return a}),i(["blur","change","click","focus","keydown","keypress","keyup","mousedown","mouseout","mouseover","mouseup","submit"],function(a){d(a,function(){return function(b,c,d){c.onElementEvent(a)}})}),d("foreach",function(){return function(a,c,d){var e=c._value.getParentElement();if(!e)return void(a.innerHTML="");a.setAttribute("data-wo-el","wo.list");var f=new wipeout.template.rendering.viewModelElement(a,null,d,!0);f.createdViewModel.itemTemplateId=wipeout.viewModels.content.createAnonymousTemplate(e);var g;return c.watch(function(a,c){a!==c&&(g&&f.disposeOf(g),g=b.tryBindArrays(c,f.createdViewModel.items,!0),g&&(g=f.registerDisposable(g)))},!0),f}}),k("wipeout.template.rendering.htmlAttributes.id",function(){return function(a,b,c){var d=b.value();return c.$this instanceof wipeout.viewModels.view&&(c.$this.templateItems[d]=a),a.id=d,function(){c.$this instanceof wipeout.viewModels.view&&c.$this.templateItems[d]===a&&delete c.$this.templateItems[d]}}}),d("if",function(){return function(a,b,c){var d=b._value.getParentElement();if(!d)return void(a.innerHTML="");a.setAttribute("data-wo-el","wo.if");var e=new wipeout.template.rendering.viewModelElement(a,null,c,!0);return e.createdViewModel.ifTrueId=wipeout.viewModels.content.createAnonymousTemplate(d),b.watch(function(a,b){e.createdViewModel.condition=b,e.createdViewModel.reEvaluate()},!0),e}}),d("render",function(){return function(a,b,c){var d=new wipeout.template.rendering.renderedContent(a,b.value(),c,1===a.nodeType&&"script"!==wipeout.utils.viewModels.getElementName(a));return b.watch(function(a,b){d.render(b)},!0),d.dispose.bind(d)}}),d("style",function(){function a(a,c,d){if(b(c.name)){var e=c.name.substr(c.name.indexOf("style-")+6);c.watch(function(b,c){a.style[e]!=c&&(a.style[e]=c)},!0)}}var b=a.test=function(a){return/^\s*(data\-)?wo\-style\-./.test(a)};return a}),d("value",function(){function a(a,c,d){if(!c.canSet())throw'Cannot bind to the property "'+c.value(!0)+'".';var e=c.getter();a.value=e(),wipeout.utils.domData.set(a,"wo-value-getter",e);var f=b;c.watch(function(b,c){if(f!==c)for(var d,e=0,g=a.options.length;g>e;e++)if(d=wipeout.utils.domData.get(a.options[e],"wo-value-getter")){if(d()===c)return void(a.selectedIndex=e)}else if(a.options[e].hasAttribute("value")){if(a.options[e].value==c)return void(a.selectedIndex=e)}else if(a.options[e].innerHTML==c)return void(a.selectedIndex=e)});var g=c.setter();c.onElementEvent(a.getAttribute("wo-on-event")||a.getAttribute("data-wo-on-event")||"change",function(){var b,c=a.options[a.selectedIndex];g(f=c?(b=wipeout.utils.domData.get(c,"wo-value-getter"))?b():c.hasAttribute("value")?c.getAttribute("value"):c.innerHTML:null)})}var b={};return function(b,c,d){if("checkbox"!==b.type&&"radio"!==b.type){if("select"===n(b.tagName))return a(b,c,d);if("option"===n(b.tagName)){var e,f=c.getter();return wipeout.utils.domData.set(b,"wo-value-getter",f),void((e=wipeout.utils.domData.get(b.parentElement,"wo-value-getter"))?b.selected=f()===e():b.parentElement&&(b.selected=f()===b.parentElement.value))}if(!c.canSet())throw'Cannot bind to the property "'+c.value(!0)+'".';var g="textarea"===n(b.tagName);c.watch(function(a,c){null==c&&(c=""),g&&b.innerHTML!==c?b.innerHTML=c:g||b.value===c||(b.value=c)},!0);var h=c.setter();c.onElementEvent(b.getAttribute("wo-on-event")||b.getAttribute("data-wo-on-event")||"change",function(){h(g?b.innerHTML:b.value)})}}}),d("visible",function(){return function(a,b,c){a.style.display=b.getter()()?"":"none",b.watch(function(b,c){c&&!b?a.style.display="":!c&&b&&(a.style.display="none")},!1)}}),k("wipeout.template.rendering.htmlAttributes.wipeoutCreateViewModel",function(){return function(a,b,c){var d=new wipeout.template.rendering.viewModelElement(a,b._value,c);return function(){d.dispose(!0)}}}),k("wipeout.template.rendering.htmlPropertyValue",function(){var a=wipeout.template.propertyValue.extend(function(a,b,c,d){this._super(a,"string"==typeof b?new wipeout.wml.wmlAttribute(b):b,c),this.action=d});return a.prototype.eventBuild=function(){return this._eventBuilt||(this._eventBuilt=wipeout.template.context.buildEventCallback(this.value()))},a.prototype.onElementEvent=function(a,c,d){this.primed();var e=this.propertyOwner,f=this.renderContext;c=c||function(a){a.preventDefault(),this.eventBuild().apply(null,f.asEventArgs(a,e))}.bind(this),e.addEventListener(a,c,d||!1);var g=new b.disposable(function(){e.removeEventListener(a,c,d||!1),c=null});return this._caching.push(g),g.dispose.bind(g)},a.prototype.setData=function(a,b,c){return this.primed(),this._caching.push({dispose:function(){wipeout.utils.domData.clear(a,b)}}),wipeout.utils.domData.set(a,b,c)},a.prototype.getData=function(a,b){return wipeout.utils.domData.get(a,b)},a.prototype.dataExists=function(a,b){return wipeout.utils.domData.exists(a,b)},a.prototype.prime=function(a,b,c,d){try{return this.otherAttributes=d,this._super(a,b,c)}finally{this.otherAttributes=null}},a.prototype.otherAttribute=function(a,b){if(!b){for(var c=0,d=this.otherAttributes.length;d>c;c++)if(this.otherAttributes[c].name.replace(/^(data\-)?wo\-/,"")===a)return!0;return!1}this.primed();for(var c=0,d=this.otherAttributes.length;d>c;c++)if(this.otherAttributes[c].name.replace(/^(data\-)?wo\-/,"")===a)return Array.prototype.push.apply(this._caching,this.otherAttributes[c].prime(this.propertyOwner,this.renderContext,function(){var a;(a=b(this.otherAttributes[c]))&&this._caching.push(a)}.bind(this),this.otherAttributes)),!0;return!1},a}),k("wipeout.template.rendering.renderedArray",function(){var a=b.disposable.extend(function(a,b){if(this._super(),this.parent=b,this.array=a,this.parent.parentRenderContext&&this.parent.parentRenderContext.$this instanceof wipeout.viewModels.list&&a===this.parent.parentRenderContext.$this.items&&(this.list=this.parent.parentRenderContext.$this),this.children=[],this.list){if(this.list.$getChild)throw"These items are being rendered already.";this.list.$getChild=function(a){if(0===arguments.length){for(var b=this.children.slice(),a=0,c=b.length;c>a;a++)b[a]=b[a].renderedChild;return b}return this.children[a]?this.children[a].renderedChild:void 0}.bind(this)}});a.prototype.remove=function(a){this.list&&this.list.removedItem(a.renderedChild),delete a.renderedChild,delete a.forItem,a.dispose()};var c={};return a.prototype.render=function(a){var b=[];i(a,function(a){if("splice"===a.type){for(var d=new Array(a.addedCount),e=0;e<a.addedCount;e++)d[e]=c;d.splice(0,0,a.index,a.removed.length),b.push.apply(b,this.children.slice(a.index,a.index+a.removed.length)),this.children.splice.apply(this.children,d)}else isNaN(parseInt(a.name))||(this.children[a.name]!==c&&b.push(this.children[a.name]),this.children[a.name]=c)},this);for(var d=b.length-1;d>=0;d--)b[d]===c&&b.splice(1,d);for(var e=0,f=this.children.length;f>e;e++)if(this.children[e]===c){for(var d=0,g=b.length;g>d;d++)if(b[d].forItem===this.array[e]){var h=b.splice(d,1)[0];0===e?this.parent.prepend(h):this.children[e-1].insertAfter(h),h.renderContext.$index.value=e,h.rename("item: "+e),this.children[e]=h;break}if(d==g){var j=document.createElement("script");0===e?this.parent.prepend(j):this.children[e-1].insertAfter(j),this.children[e]=new wipeout.template.rendering.renderedContent(j,"item: "+e,this.parent.parentRenderContext);var k=this.list?this.list._createItem(this.array[e]):this.array[e];this.children[e].render(k,e),this.children[e].forItem=this.array[e],this.list&&(this.children[e].renderedChild=k,this.list.onItemRendered(k))}}i(b,this.remove,this)},a.prototype.dispose=function(){this._super(),i(this.children,this.remove,this),this.children.length=0,this.list&&(delete this.list.$getChild,delete this.list),delete this.array},a}),function(){function a(a){try{return a instanceof b?a.detatch():a instanceof Array?a:[a]}finally{a instanceof b&&(a.detatched=null)}}var b=wipeout.template.rendering.renderedContent;b.prototype.prepend=function(b){this.helper.prepend(this,a(b))},b.prototype.insertBefore=function(b){this.helper.insertBefore(this,a(b))},b.prototype.insertAfter=function(b){this.helper.insertAfter(this,a(b))},b.prototype.detatch=function(){return this.detatched||(this.detatched=this.helper.detatch(this)),this.detatched.slice()},b.prototype.allHtml=function(){return this.detatched?this.detatch():this.helper.allHtml(this)}}(),k("wipeout.template.rendering.renderedContentCommentHelper",function(){var a=wipeout.template.rendering.renderedContentHelperBase.extend(function(){this._super()});return a.prototype.init=function(a,b,c){var d=document.createComment(" "+c+" "),e=document.createComment(" /"+c+" ");return b.parentNode.insertBefore(d,b),b.parentNode.insertBefore(e,b),b.parentNode.removeChild(b),{opening:d,closing:e}},a.prototype.rename=function(a,b){a.openingTag.nodeValue=" "+b+" ",a.closingTag.nodeValue=" /"+b+" "},a.prototype.empty=function(a){for(var b;(b=a.openingTag.nextSibling)&&b!==a.closingTag;)1===b.elementType&&(b.innerHTML=""),b.parentNode.removeChild(a.openingTag.nextSibling)},a.prototype.disposeOf=function(a){this.empty(a),a.closingTag.parentNode.removeChild(a.closingTag),a.openingTag.parentNode.removeChild(a.openingTag)},a.prototype.appendHtml=function(a,b){if(a.openingTag&&1===a.openingTag.nodeType)a.openingTag.insertAdjacentHTML("afterend",b);else{var c=document.createElement("script");a.closingTag.parentNode.insertBefore(c,a.closingTag),c.insertAdjacentHTML("afterend",b),c.parentNode.removeChild(c)}},a.prototype.prepend=function(a,b){b.push(a.openingTag.nextSibling||a.closingTag);for(var c=b.length-2;c>=0;c--)b[c+1].parentNode.insertBefore(b[c],b[c+1])},a.prototype.detatch=function(a){for(var b=a.openingTag,c=[a.openingTag],d=0;b&&b!==a.closingTag;d++)c.push(b=b.nextSibling),c[d].parentNode.removeChild(c[d]);return c[d].parentNode.removeChild(c[d]),c},a.prototype.allHtml=function(a){for(var b=[a.openingTag],c=a.openingTag;c&&c!==a.closingTag;)b.push(c=c.nextSibling);return b},a}),k("wipeout.template.rendering.renderedContentElementHelper",function(){var a=wipeout.template.rendering.renderedContentHelperBase.extend(function(){this._super()});return a.prototype.init=function(a,b,c){return b.setAttribute("data-wo-view-model",c),{opening:b,closing:b}},a.prototype.rename=function(a,b){a.openingTag.setAttribute("data-wo-view-model",b)},a.prototype.empty=function(a){a.openingTag.innerHTML=""},a.prototype.disposeOf=function(a){this.empty(a),a.openingTag.removeAttribute("data-wo-view-model")},a.prototype.appendHtml=function(a,b){a.openingTag.insertAdjacentHTML("beforeend",b)},a.prototype.prepend=function(a,b){var c;(c=a.openingTag.firstChild)?i(b,function(b){a.openingTag.insertBefore(b,c)}):i(b,function(b){a.openingTag.appendChild(b)})},a.prototype.detatch=function(a){return a.openingTag.parentNode.removeChild(a.openingTag),[a.openingTag]},a.prototype.allHtml=function(a){return[a.openingTag]},a}),k("wipeout.template.rendering.viewModelElement",function(){function a(){throw"A view model element can only be rendered once"}var c=wipeout.template.rendering.renderedContent.extend(function(b,c,d,e){var f=wipeout.utils.viewModels.getViewModelConstructor(c?c:b);if(!f)throw"Invalid view model";this._super(b,wipeout.utils.obj.trim(f.name),d,e),this.createdViewModel=new f.constructor;var g=wipeout.template.engine.instance.getVmInitializer(c||wipeout.wml.wmlParser(b)),h=g.initialize(this.createdViewModel,null,"shareParentScope");this.renderContext=d?d.contextFor(this.createdViewModel):new wipeout.template.context(this.createdViewModel);var i=g.initialize(this.createdViewModel,d||this.renderContext);this.disposeOfViewModelBindings=function(){h.apply(this,arguments),i.apply(this,arguments)},this.createdViewModel instanceof wipeout.viewModels.view&&(this.createdViewModel.onInitialized(),this.renderContext.$parentContext||this.createdViewModel.onApplicationInitialized()),this.render(this.createdViewModel),this.render=a});return c.prototype.dispose=function(a){this._super(a),this.disposeOfViewModelBindings(),this.createdViewModel instanceof b.disposable?this.createdViewModel.dispose():b.dispose(this.createdViewModel),delete this.createdViewModel},c}),k("wipeout.utils.domData",function(){function a(){}var b="__wipeout_domData";return a.exists=function(a,c){return a&&a[b]&&a[b].hasOwnProperty(c)},a.get=function(c,d){return c?arguments.length<2?c[b]:a.exists(c,d)?c[b][d]:void 0:void 0},a.set=function(a,c,d){return a?(a[b]||(a[b]={}))[c]=d:void 0},a.clear=function(a,c){if(a){if(c&&a[b])for(var d in a[b])if(d!==c)return void delete a[b][c];delete a[b]}},a}),k("wipeout.utils.find",function(){var b=a.extend(function(a){this._super(),this.renderContext=a});return b.prototype.find=function(a,b){var c={};if(b)for(var d in b)c[d]=b[d];if(b=c,b.$number||(b.$number=0),a&&a.constructor===Function)b.$instanceOf=a;else if(a&&a.constructor!==String)for(var d in a)b[d]=a[d];else b.$ancestry=wipeout.utils.obj.trim(a);!b.$number&&b.$n&&(b.$number=b.$n),!b.$instanceOf&&b.$i&&(b.$instanceOf=b.$i),!b.$instanceOf&&b.$instanceof&&(b.$instanceOf=b.$instanceof),!b.$ancestry&&b.$a&&(b.$ancestry=b.$a),!b.$type&&b.$t&&(b.$type=b.$t);var e=b.$m||b.$model;return delete b.$m,delete b.$model,delete b.$n,delete b.$instanceof,delete b.$i,delete b.$a,delete b.$t,this._find(b,e)},b.prototype._find=function(a,b){if(!this.renderContext||!this.renderContext.$parentContext)return null;for(var c,d=b?function(a){return a&&a.$this instanceof wo.view?a.$this.model:null}:function(a){return a?a.$this:null},e=this.renderContext,f=a.$number;f>=0&&e;f--){var g=0;for(e=e.$parentContext;!wipeout.utils.find.is(c=d(e),a,g)&&e;)e=e.$parentContext,g++}return c},b.create=function(a){var b=new wipeout.utils.find(a);return function(a,c){return b.find(a,c)}},b.regex={ancestors:/^(great)*(grand){0,1}parent$/,great:/great/g,grand:/grand/g},b.$type=function(a,b,c){return a&&a.constructor===b},b.$ancestry=function(a,b,c){if(b=(b||"").toLowerCase(),-1!==b.indexOf("greatparent"))return!1;var d=0,e=b.match(wipeout.utils.find.regex.great);return e&&(d+=e.length),e=b.match(wipeout.utils.find.regex.grand),e&&(d+=e.length),d===c},b.$instanceOf=function(a,b,c){return a&&b&&b.constructor===Function?a instanceof b:!1},b.is=function(a,b,c){if(!a)return!1;for(var d in b)if("$number"!==d)if("$"===d[0]){if(!wipeout.utils.find[d](a,b[d],c))return!1}else if(b[d]!==a[d])return!1;return!0},b}),k("wipeout.utils.html",function(){function a(){}var b=function(a){return a?a.wipeoutOpening?a.wipeoutOpening.viewModel:a.wipeoutClosing?a.wipeoutClosing.viewModel:b(wipeout.template.rendering.renderedContent.getParentElement(a)):null},c=function(a){var b=document.createElement("span");return b.innerHTML="Loading template",b};return a.createTemplatePlaceholder=c,a.getViewModel=b,a}),k("wipeout.utils.jsParse",function(){function a(a,b,c){if(c)return!1;for(var d=0;"\\"===a[b-1-d];)d++;return d%2!=0}function b(a,b){a instanceof Function&&(a=a.toString());for(var c,d=[{end:0}],e=0;c=b.getFirst(a,e);)e=c.token.close.lastIndex,d.push(c);d.push({end:a.length});for(var c,g=[],h=new i,e=1,j=d.length;j>e;e++)g.push(a.substring(d[e-1].end,d[e].begin)),d[e].token&&d[e].token.tokenize&&(h[c=f()]=a.substring(d[e].begin,d[e].end),g.push(c));return h.output=g.join(""),h}function c(){}var d=[{open:/'/gm,close:/'/gm,tokenize:!0,isEscaped:a},{open:/"/gm,close:/"/gm,tokenize:!0,isEscaped:a},{open:/\/\//gm,close:/(?=\r?\n)/gm,tokenize:!1},{open:/\/\*/gm,close:/\*\//gm,tokenize:!1}],e=[{open:/\{/gm,close:/\}/gm,tokenize:!0,nested:!0},{open:/\(/gm,close:/\)/gm,tokenize:!0,nested:!0},{open:/\[/gm,close:/\]/gm,tokenize:!0,nested:!0}];e.getFirst=d.getFirst=function(a,b){for(var c,d,e,f=0,g=this.length;g>f;f++)this[f].open.lastIndex=b,c=this[f].open.exec(a),c&&(!d||c.index<d.index)&&(d=c,e=this[f]);if(d){var h,i,j=1;do{for(e.close.lastIndex=e.open.lastIndex;e.nested&&(h=e.open.exec(a))&&e.isEscaped&&e.isEscaped(a,h.index,!0););for(;(i=e.close.exec(a))&&e.isEscaped&&e.isEscaped(a,i.index,!1););if(!i)throw"Invalid function string: "+a;h&&h.index<i.index?j++:(e.open.lastIndex=e.close.lastIndex,j--)}while(e.nested&&j>0);return{token:e,begin:d.index,end:e.close.lastIndex}}};var f=function(){var a=0;return function(){return"##token"+ ++a+"##"}}(),g=function(a){return b(a,d)},h=function(a){var c=g(a),d=b(c.output,e);for(var f in d)d.hasOwnProperty(f)&&"output"!==f&&(d[f]=c.addTokens(d[f]));for(var f in c)"output"!==f&&(d[f]=c[f]);return d},i=function(){};return i.prototype.addTokens=function(a){for(var b in this)this.hasOwnProperty(b)&&"output"!==b&&(a=a.replace(b,this[b]));return a},c.removeCommentsTokenStrings=g,c.removeCommentsTokenStringsAndBrackets=h,c}),k("wipeout.utils.viewModels",function(){function a(){}var b="wo-el",c="data-wo-el";return a.getElementName=function(a){return name=a instanceof Element?a.getAttribute(b)||a.getAttribute(c)||p(a.localName):p(m(a.name)),/^js[A-Z]/.test(name)?name.substr(2):name},a.getViewModel=function(b,c){if(b&&b!==c){if(b.wipeoutOpening)return b.wipeoutOpening.viewModel;if(b.wipeoutClosing)return b.wipeoutClosing.viewModel;var d=b.previousSibling;return d&&d.wipeoutClosing&&(d=d.wipeoutClosing.openingTag.previousSibling||b.parentNode),a.getViewModel(d)}},a.getViewModelConstructor=function(b){var c,d=a.getElementName(b);return!a.definitelyNotAViewModel[d]&&(c=wipeout.utils.obj.getObject(d))?{name:d,constructor:c}:void 0},a.definitelyNotAViewModel={a:!0,abbr:!0,acronym:!0,address:!0,applet:!0,area:!0,article:!0,aside:!0,audio:!0,b:!0,base:!0,basefont:!0,bdi:!0,bdo:!0,big:!0,blockquote:!0,body:!0,br:!0,button:!0,canvas:!0,caption:!0,center:!0,cite:!0,code:!0,col:!0,colgroup:!0,command:!0,datalist:!0,dd:!0,del:!0,details:!0,dfn:!0,dir:!0,div:!0,dl:!0,dt:!0,em:!0,embed:!0,fieldset:!0,figcaption:!0,figure:!0,font:!0,footer:!0,form:!0,frame:!0,frameset:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,head:!0,header:!0,hgroup:!0,hr:!0,html:!0,i:!0,iframe:!0,img:!0,input:!0,ins:!0,kbd:!0,keygen:!0,label:!0,legend:!0,li:!0,link:!0,map:!0,mark:!0,menu:!0,meta:!0,meter:!0,nav:!0,noframes:!0,noscript:!0,object:!0,ol:!0,optgroup:!0,option:!0,output:!0,p:!0,param:!0,pre:!0,progress:!0,q:!0,rp:!0,rt:!0,ruby:!0,s:!0,samp:!0,script:!0,section:!0,select:!0,small:!0,source:!0,span:!0,strike:!0,strong:!0,style:!0,sub:!0,summary:!0,sup:!0,table:!0,tbody:!0,td:!0,textarea:!0,tfoot:!0,th:!0,thead:!0,time:!0,title:!0,tr:!0,track:!0,tt:!0,u:!0,ul:!0,"var":!0,video:!0,wbr:!0},a}),k("wipeout.viewModels.content",function(){function a(a,b,c){this.currentTemplate=a[c],
this.currentTemplateId=a[b],this.owner=a,this.templateIdProperty=b,this.templateProperty=c,this.refreshTemplate(this.currentTemplateId),this.d1=a.observe(b,this.onTemplateIdChange,{context:this}),this.d2=a.observe(c,this.onTemplateChange,{context:this})}var b=wipeout.viewModels.view.extend(function(a,b){this._super(a,b),wipeout.viewModels.content.createTemplatePropertyFor(this,"templateId","setTemplate")});return b.addGlobalParser("setTemplate","template"),b.addGlobalBindingType("setTemplate","setTemplateToTemplateId"),b.createTemplatePropertyFor=function(b,c,d){return new a(b,c,d)},b.createAnonymousTemplate=function(){function a(){return c+"-"+ ++b}var b=Math.floor(1e9*Math.random()),c="WipeoutAnonymousTemplate",d={};return function(b){if("string"==typeof b){if(!d[b]){var e=a();wipeout.template.engine.instance.setTemplate(e,b),d[b]=e}return d[b]}if(!b[c]){var e=a();wipeout.template.engine.instance.setTemplate(e,b),b[c]=e}return b[c]}}(),a.prototype.dispose=function(){this.d1.dispose(),this.d2.dispose()},a.prototype.refreshTemplate=function(a){this.pendingLoad=wipeout.template.engine.instance.getTemplateXml(a,function(a){delete this.pendingLoad,this.currentTemplate=this.owner[this.templateProperty]=a}.bind(this))},a.prototype.onTemplateIdChange=function(a,b){return b===this.currentTemplateId?void(this.currentTemplateId=null):(this.currentTemplateId=null,this.pendingLoad&&this.pendingLoad.cancel(),void this.refreshTemplate(b))},a.prototype.onTemplateChange=function(a,b){return b===this.currentTemplate?void(this.currentTemplate=null):(this.currentTemplate=null,void(this.currentTemplateId=this.owner[this.templateIdProperty]=wipeout.viewModels.content.createAnonymousTemplate(b)))},b}),k("wipeout.viewModels.if",function(){var a=!0,b=function(){a&&(a=!1,c.blankTemplateId=wipeout.viewModels.content.createAnonymousTemplate("",!0))},c=wipeout.viewModels.view.extend(function d(a,c){b(),this._super(d.blankTemplateId,c),this.shareParentScope=!0,this.condition=!1,this.ifTrueId=a||d.blankTemplateId,this.ifFalseId=d.blankTemplateId,this.observe("ifTrueId",this.reEvaluate,{context:this}),this.observe("ifFalseId",this.reEvaluate,{context:this}),this.observe("condition",this.reEvaluate,{context:this}),this.ifTrue="",wipeout.viewModels.content.createTemplatePropertyFor(this,"ifTrueId","ifTrue"),this.ifFalse="",wipeout.viewModels.content.createTemplatePropertyFor(this,"ifFalseId","ifFalse")});return c.addGlobalParser("ifFalse","template"),c.addGlobalBindingType("ifFalse","ifTemplateProperty"),c.addGlobalParser("ifTrue","template"),c.addGlobalBindingType("ifTrue","ifTemplateProperty"),c.prototype.reEvaluate=function(){this.synchronusTemplateChange(this.condition?this.ifTrueId:this.ifFalseId)},c}),k("wipeout.viewModels.list",function(){var a,c,d=wipeout.viewModels.content.extend(function e(c,d,f){this._super(c||a||(a=wipeout.viewModels.content.createAnonymousTemplate("{{$this.items}}")),f),this.itemTemplateId=d,this.itemTemplate="",wipeout.viewModels.content.createTemplatePropertyFor(this,"itemTemplateId","itemTemplate"),this.items=new b.array,this.registerDisposable(this.items),this.registerRoutedEvent(e.removeItem,this._removeItem,this),this.observe("itemTemplateId",function(a,b){i(this.getItemViewModels(),function(a){a.__createdBylist&&a.synchronusTemplateChange(b)})},{context:this})});return d.addGlobalParser("itemTemplate","template"),d.addGlobalBindingType("itemTemplate","templateProperty"),d.removeItem={},d.prototype._removeItem=function(a){-1!==this.items.indexOf(a.data)&&(this.removeItem(a.data),a.handled=!0)},d.prototype.getItemViewModels=function(){return this.$getChild?this.$getChild():[]},d.prototype.getItemViewModel=function(a){return this.$getChild?this.$getChild(a):void 0},d.prototype.removeItem=function(a){this.items.remove(a)},d.prototype.removedItem=function(a){this.onItemRemoved(a),a instanceof b.disposable&&a.dispose()},d.prototype.onItemRemoved=function(a){},d.prototype.onItemRendered=function(a){},d.prototype._createItem=function(a){var b=this.createItem(a);return b},d.prototype.createItem=function(a){var b=new wipeout.viewModels.view(this.itemTemplateId||c||(c=wipeout.viewModels.content.createAnonymousTemplate("{{$this.model}}")),a);return b.__createdBylist=!0,b},d}),function(){function a(){}var b=wipeout.viewModels.view;b.prototype.registerEvent=function(b,c,d,e,f){if(!b)return{dispose:a};b=wipeout.utils.obj.splitPropertyName(b);var g=b.length,h=this,i=wipeout.events.event.instance.registerForAll(c,function(a,c){if(c){for(var e=h,f=0;e&&g>f;f++)e=e[b[f]];if(e===c)return d.apply(this,arguments)}},e,f);return this.registerDisposable(i),i};var c="routed-event";b.prototype.registerRoutedEvent=function(a,b,d,e){return this.$routedEventSubscriptions||(this.$routedEventSubscriptions=new wipeout.events.event),this.$routedEventSubscriptions.register(a,c,b,d,e)},b.prototype.triggerRoutedEvent=function(a,b){if(b instanceof wipeout.events.routedEventArgs||(b=new wipeout.events.routedEventArgs(b,this)),!b.handled&&(this.$routedEventSubscriptions&&this.$routedEventSubscriptions.trigger(a,c,b),!b.handled&&(this.model instanceof wipeout.events.routedEventModel&&this.model.routedEventTriggered(a,b),!b.handled))){var d=this.getParent();d&&d.triggerRoutedEvent(a,b)}}}();var r=function(){if(this._parentElement){for(var a in this._parentElement)if(this._parentElement[a]===this)return this._parentElement;delete this._parentElement}return null};k("wipeout.wml.wmlElementBase",function(){var b=a.extend(function(){this._super(),this.length=0});return b.extend=a.extend,b.prototype._super=a.prototype._super,b.prototype.push=function(a){if(a.getParentElement!==r)throw"Invalid template node";if(a.getParentElement())throw"This node already has a parent element";return this[this.length]=a,this.length++,a._parentElement=this,this.length},b.prototype.splice=function(){throw"not implemented"},b.prototype.serializeContent=function(){var a=[];return wipeout.utils.obj.enumerateArr(this,function(b){a.push(b.serialize())}),a.join("")},b}),k("wipeout.wml.wmlElement",function(){var a=wipeout.wml.wmlElementBase.extend(function(a,b){this._super(),this.name=a,this.attributes={},this.inline=!!b,this.nodeType=1});return a.prototype.getParentElement=r,a.prototype.getAttribute=function(a){return this.attributes[a]?this.attributes[a].value:null},a.prototype.serialize=function(){var a=[];a.splice(0,0,"<",this.name);var b=2;for(var c in this.attributes)a.splice(b,0," ",c,this.attributes[c].serializeValue()),b+=3;var d=this.serializeContent();return!d.length&&this.inline?a.push(" />"):(a.push(">"),a.push(d),a.push("</"+this.name+">")),a.join("")},a}),k("wipeout.wml.wmlAttribute",function(){function a(a,b){this.value=a,this.nodeType=2,this._parentElement=b}return a.prototype.serializeValue=function(){return'="'+this.value.replace(/&/g,"&amp;").replace(/"/g,"&quot;")+'"'},a.prototype.serializeContent=function(){return this.value},a.prototype.getParentElement=function(){if(this._parentElement&&this._parentElement.attributes){for(var a in this._parentElement.attributes)if(this._parentElement.attributes[a]===this)return this._parentElement;delete this._parentElement}return null},a}),k("wipeout.wml.wmlComment",function(){var a=function(a){this.commentText=a,this.nodeType=8};return a.prototype.serialize=function(){return"<!--"+this.commentText+"-->"},a.prototype.getParentElement=r,a}),k("wipeout.wml.wmlString",function(){var a=function(a){this.text=a,this.nodeType=3};return a.prototype.serialize=function(){return this.text},a.prototype.getParentElement=r,a}),k("wipeout.wml.wmlParser",function(){function a(b){for(var c,d=b.getAttribute("wo-el")||b.getAttribute("data-wo-el")||b.localName,f=new wipeout.wml.wmlElement(d,-1!==e.indexOf(d)),g=0,h=b.childNodes.length;h>g;g++)1===b.childNodes[g].nodeType?f.push(a(b.childNodes[g])):8===b.childNodes[g].nodeType?f.push(new wipeout.wml.wmlComment(b.childNodes[g].textContent)):3===b.childNodes[g].nodeType?f.push(new wipeout.wml.wmlString(b.childNodes[g].textContent)):(c=document.createElement("div"),c.appendChild(b.childNodes[g]),f.push(new wipeout.wml.wmlString(c.innerHTML)));for(var g=0,h=b.attributes.length;h>g;g++)/^(data\-)?wo\-el$/.test(b.attributes[g].name)||(f.attributes[b.attributes[g].name]=new wipeout.wml.wmlAttribute(b.attributes[g].value,f));return f}function b(c){if(c instanceof Element)return a(c);var d=b.addToElement(c);if(!d)throw"Cannot create a template for the following string: "+c;return a(d)}b.specialTags={area:"map",base:"head",basefont:"head",body:"html",caption:"table",col:"colgroup",colgroup:"table",command:"menu",frame:"frameset",frameset:"html",head:"html",keygen:"form",li:"ul",optgroup:"select",option:"select",rp:"rt",rt:"ruby",source:"audio",tbody:"table",td:"tr",tfoot:"table",th:"tr",thead:"table",tr:"tbody"},b.cannotCreateTags={html:!0,basefont:!0,base:!0,body:!0,frame:!0,frameset:!0,head:!0},b.ieReadonlyElements={audio:!0,col:!0,colgroup:!0,frameset:!0,head:!0,rp:!0,rt:!0,ruby:!0,select:!0,style:!0,table:!0,tbody:!0,tfooy:!0,thead:!0,title:!0,tr:!0},b.getFirstTagName=function(a){var b=/^\s*<\s*[a-z\-\.0-9\$]+(\s|>|\/)/.exec(a.replace(/<\!--[^>]*-->/g,"").replace(/^\s*/,""));return b?m(b[0].substr(1,b[0].length-2)):null};var c=document.createElement("table");c.innerHTML="<tbody></tbody>";var d=!c.childNodes.length;b.addToElement=function(a){var c=b.getFirstTagName(a);if(!c){var e=document.createElement("div");return e.innerHTML=a,e}if(b.cannotCreateTags[c])throw'Cannot create an instance of the "'+c+'" tag.';var f=b.specialTags[c]||"div";if(d&&b.ieReadonlyElements[f]){for(var g=b.createElement("<"+f+">"+a+"</"+f+">"),h=0,i=g.childNodes.length;i>h;h++){var j=g.childNodes[h];if(1===j.nodeType&&n(j.tagName)===f)return j}return document.createElement(f)}var e=document.createElement(f);return e.innerHTML=a,e};var e=["area","base","br","col","command","hr","img","input","keygen","link","meta","param","source"];return b}),k("wipeout.wml.wmlParser_experimental",function(){return function(){}}),window.wo=function(a,d){function e(d,f){if(wipeout.utils.viewModels.getViewModel(d,f))return void c("Attempting to create a wo application twice.",d);if(wipeout.utils.viewModels.getViewModelConstructor(d)){var g=new wipeout.template.rendering.viewModelElement(d);return null!=a&&(g.createdViewModel.model=a),g}var h=new b.disposable;if(i(Array.prototype.slice.call(d.childNodes),function(a){if(1===a.nodeType&&d.contains(a)){var b;(b=e(a,d))&&h.registerDisposable(b)}}),h.$disposables)for(var j in h.$disposables)return h}if(arguments.length<2)d=document.body;else if("string"==typeof d)d=document.getElementById(d);else if(!d)return;return e(d)},window.addEventListener("load",function(){window.wo()}),g("viewModel",f),g("array",b.array),g("observable",b.observable),g("bindings",wipeout.htmlBindingTypes),g("parsers",wipeout.template.initialization.parsers),g("filters",wipeout.template.filters),g("definitelyNotAViewModel",wipeout.utils.viewModels.definitelyNotAViewModel),g("addHtmlAttribute",e),g("findFilters",wipeout.utils.find),g("triggerEvent",function(a,b,c){return wipeout.events.event.instance.trigger.apply(wipeout.events.event.instance,arguments)}),j(wipeout.viewModels,function(a,b){g(b,a)})}(window.orienteer,window.busybody);

}());